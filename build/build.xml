<?xml version="1.0" encoding="UTF-8"?>
<project name="ChurchDirectory" default="build">
    <!-- ============================================  -->
    <!-- Target: prepare                               -->
    <!-- ============================================  -->
    <target name="prepare">
        <echo msg="Making directory ./build" />
        <mkdir dir="./build" />
    </target>

    <!-- ============================================  -->
    <!-- (DEFAULT)  Target: info                       -->
    <!-- ============================================  -->
    <target name="info">
        <echo msg="Build for Joomla Bible Study, Please modify location as you need." />
    </target>

    <!-- set global properties for this build -->
    <property name="src" value="src"/>
    <property name="build" value="/Users/bcordis/NetBeansProjects/joomla_churchdirectory/"/>
    <property name="dist"  value="dist"/>

    <target name="reset">
        <echo msg="Reset back to Dev State" />
        <delete file="../admin/churchdirectory.xml" />
        <delete file="../admin/churchdirectory.script.php" />
        <symlink target="../admin/churchdirectory.xml" link="../churchdirectory.xml"/>
        <symlink target="../admin/churchdirectory.script.php" link="../churchdirectory.script.php"/>
    </target>

    <target name="clean">
        <echo message="Cleaning directories" />
        <delete file="packages/com_churchdirectory.zip" />
    </target>

    <!-- ============================================  -->
    <!-- (DEFAULT)  Target: dist                       -->
    <!-- ============================================  -->
    <target name="build">
        <echo message="Building package" />
        <mkdir dir="packages" />
        <delete file="../admin/churchdirectory.xml" />
        <delete file="../admin/file.script.php" />
        <zip destfile="packages/com_churchdirectory.zip">
            <fileset dir="../">
                <include name="admin/**" />
                <include name="libraries/**" />
                <include name="media/**" />
                <include name="modules/**" />
                <include name="plugins/**" />
                <include name="site/**" />
                <include name="templates/**" />
                <include name="*" />
            </fileset>
        </zip>
    </target>

<!-- ============================================  -->
<!-- (DEFAULT)  Target: dist                       -->
<!-- ============================================  -->
<target name="dist" depends="build">
    <echo msg="Creating archive..." />

    <tar destfile="./build/build.tar.gz" compression="gzip">
        <fileset dir="./build">
            <include name="*" />
        </fileset>
    </tar>

    <echo msg="Files copied and compressed in build directory OK!" />
</target>
</project>