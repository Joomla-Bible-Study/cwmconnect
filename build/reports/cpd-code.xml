<?xml version="1.0" encoding="UTF-8"?>
<pmd-cpd>
  <duplication lines="37" tokens="69">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/mediafiles.php" line="47"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/messages.php" line="48"/>
    <codefragment>        $prefix = 'BiblestudyModel',
        $config = array('ignore_request' =&gt; true))
    {
        $model = parent::getModel($name, $prefix, $config);

        return $model;
    }

    /**
     * Method to save the submitted ordering values for records via AJAX.
     *
     * @return    void
     *
     * @since   3.0
     */
    public function saveOrderAjax()
    {
        // Get the input
        $pks   = $this-&gt;input-&gt;post-&gt;get('cid', array(), 'array');
        $order = $this-&gt;input-&gt;post-&gt;get('order', array(), 'array');

        // Sanitize the input
        JArrayHelper::toInteger($pks);
        JArrayHelper::toInteger($order);

        // Get the model
        $model = $this-&gt;getModel();

        // Save the ordering
        $return = $model-&gt;saveorder($pks, $order);

        if ($return)
        {
            echo "1";
        }

        // Close the application
</codefragment>
  </duplication>
  <duplication lines="13" tokens="12">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/cpanel.php" line="21"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/mimetype.php" line="21"/>
    <codefragment>class BiblestudyControllerCpanel extends JControllerForm
{
    /**
     * Class constructor.
     *
     * @param   array  $config  A named array of configuration variables.
     *
     * @since    7.0.0
     */
    public function __construct($config = array())
    {
        parent::__construct($config);
    }
</codefragment>
  </duplication>
  <duplication lines="13" tokens="12">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/cpanel.php" line="21"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/podcast.php" line="21"/>
    <codefragment>class BiblestudyControllerCpanel extends JControllerForm
{
    /**
     * Class constructor.
     *
     * @param   array  $config  A named array of configuration variables.
     *
     * @since    7.0.0
     */
    public function __construct($config = array())
    {
        parent::__construct($config);
    }
</codefragment>
  </duplication>
  <duplication lines="19" tokens="30">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/mediafiles.php" line="66"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/series.php" line="64"/>
    <codefragment>        $order = $this-&gt;input-&gt;post-&gt;get('order', array(), 'array');

        // Sanitize the input
        JArrayHelper::toInteger($pks);
        JArrayHelper::toInteger($order);

        // Get the model
        $model = $this-&gt;getModel();

        // Save the ordering
        $return = $model-&gt;saveorder($pks, $order);

        if ($return)
        {
            echo "1";
        }

        // Close the application
        JFactory::getApplication()-&gt;close();
</codefragment>
  </duplication>
  <duplication lines="13" tokens="12">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/cpanel.php" line="21"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/server.php" line="21"/>
    <codefragment>class BiblestudyControllerCpanel extends JControllerForm
{
    /**
     * Class constructor.
     *
     * @param   array  $config  A named array of configuration variables.
     *
     * @since    7.0.0
     */
    public function __construct($config = array())
    {
        parent::__construct($config);
    }
</codefragment>
  </duplication>
  <duplication lines="13" tokens="12">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/cpanel.php" line="21"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/share.php" line="21"/>
    <codefragment>class BiblestudyControllerCpanel extends JControllerForm
{
    /**
     * Class constructor.
     *
     * @param   array  $config  A named array of configuration variables.
     *
     * @since    7.0.0
     */
    public function __construct($config = array())
    {
        parent::__construct($config);
    }
</codefragment>
  </duplication>
  <duplication lines="36" tokens="69">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/mediafiles.php" line="47"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/teachers.php" line="35"/>
    <codefragment>        $prefix = 'BiblestudyModel',
        $config = array('ignore_request' =&gt; true))
    {
        $model = parent::getModel($name, $prefix, $config);

        return $model;
    }

    /**
     * Method to save the submitted ordering values for records via AJAX.
     *
     * @return    void
     *
     * @since   3.0
     */
    public function saveOrderAjax()
    {
        // Get the input
        $pks   = $this-&gt;input-&gt;post-&gt;get('cid', array(), 'array');
        $order = $this-&gt;input-&gt;post-&gt;get('order', array(), 'array');

        // Sanitize the input
        JArrayHelper::toInteger($pks);
        JArrayHelper::toInteger($order);

        // Get the model
        $model = $this-&gt;getModel();

        // Save the ordering
        $return = $model-&gt;saveorder($pks, $order);

        if ($return)
        {
            echo "1";
        }

</codefragment>
  </duplication>
  <duplication lines="6" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/servers.php" line="35"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/templatecodes.php" line="37"/>
    <codefragment>    public function getModel($name = 'Server', $prefix = 'BiblestudyModel', $config = array('ignore_request' =&gt; true))
    {
        $model = parent::getModel($name, $prefix, $config);

        return $model;
    }
</codefragment>
  </duplication>
  <duplication lines="13" tokens="12">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/cpanel.php" line="21"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/topic.php" line="21"/>
    <codefragment>class BiblestudyControllerCpanel extends JControllerForm
{
    /**
     * Class constructor.
     *
     * @param   array  $config  A named array of configuration variables.
     *
     * @since    7.0.0
     */
    public function __construct($config = array())
    {
        parent::__construct($config);
    }
</codefragment>
  </duplication>
  <duplication lines="8" tokens="19">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/liveupdate/classes/xmlslurp.php" line="133"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/liveupdate/classes/xmlslurp.php" line="237"/>
    <codefragment>        if (empty($filename))
        {
            return array('version' =&gt; '', 'date' =&gt; '', 'xmlfile' =&gt; '');
        }

        try
        {
            $xml = new SimpleXMLElement($filename, LIBXML_NONET, true);
</codefragment>
  </duplication>
  <duplication lines="8" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/liveupdate/classes/xmlslurp.php" line="133"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/liveupdate/classes/xmlslurp.php" line="298"/>
    <codefragment>        if (empty($filename))
        {
            return array('version' =&gt; '', 'date' =&gt; '', 'xmlfile' =&gt; '');
        }

        try
        {
            $xml = new SimpleXMLElement($filename, LIBXML_NONET, true);
</codefragment>
  </duplication>
  <duplication lines="8" tokens="21">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/liveupdate/classes/xmlslurp.php" line="298"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/liveupdate/classes/xmlslurp.php" line="371"/>
    <codefragment>        if (!JFile::exists($filename))
        {
            return array('version' =&gt; '', 'date' =&gt; '', 'xmlfile' =&gt; '');
        }

        try
        {
            $xml = new SimpleXMLElement($filename, LIBXML_NONET, true);
</codefragment>
  </duplication>
  <duplication lines="22" tokens="57">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/locations.php" line="38"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/locationslist.php" line="38"/>
    <codefragment>    protected function getOptions()
    {
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('id,location_text');
        $query-&gt;from('#__bsms_locations');
        $db-&gt;setQuery((string) $query);
        $messages = $db-&gt;loadObjectList();

        $options = array();

        if ($messages)
        {
            foreach ($messages as $message)
            {
                $options[] = JHtml::_('select.option', $message-&gt;id, $message-&gt;location_text);
            }
        }

        $options = array_merge(parent::getOptions(), $options);

        return $options;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="43">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/modal/seriesdetail.php" line="89"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/modal/studydetails.php" line="93"/>
    <codefragment>        $html .= '&lt;div class="button2-left"&gt;&lt;div class="blank"&gt;&lt;a class="modal" title="' . JText::_('JBS_CMN_SELECT_SERIES') . '"  href="' . $link . '" rel="{handler: \'iframe\', size: {x: 800, y: 450}}"&gt;' . JText::_('JBS_CMN_SELECT_SERIES') . '&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;' . "\n";
        // The active study id field.
        if (0 == (int) $this-&gt;value) {
            $value = '';
        } else {
            $value = (int) $this-&gt;value;
        }

        // class='required' for client side validation
        $class = '';
        if ($this-&gt;required) {
            $class = ' class="required modal-value"';
        }

        $html .= '&lt;input type="hidden" id="' . $this-&gt;id . '_id"' . $class . ' name="' . $this-&gt;name . '" value="' . $value . '" /&gt;';

        return $html;
</codefragment>
  </duplication>
  <duplication lines="6" tokens="19">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/modal/studydetails.php" line="38"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/modal/teacherdisplay.php" line="38"/>
    <codefragment>    protected function getInput() {

        // Load the modal behavior script.
        JHtml::_('behavior.modal', 'a.modal');

        // Load the javascript and css
</codefragment>
  </duplication>
  <duplication lines="17" tokens="43">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/modal/seriesdetail.php" line="89"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/modal/teacherdisplay.php" line="91"/>
    <codefragment>        $html .= '&lt;div class="button2-left"&gt;&lt;div class="blank"&gt;&lt;a class="modal" title="' . JText::_('JBS_CMN_SELECT_SERIES') . '"  href="' . $link . '" rel="{handler: \'iframe\', size: {x: 800, y: 450}}"&gt;' . JText::_('JBS_CMN_SELECT_SERIES') . '&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;' . "\n";
        // The active study id field.
        if (0 == (int) $this-&gt;value) {
            $value = '';
        } else {
            $value = (int) $this-&gt;value;
        }

        // class='required' for client side validation
        $class = '';
        if ($this-&gt;required) {
            $class = ' class="required modal-value"';
        }

        $html .= '&lt;input type="hidden" id="' . $this-&gt;id . '_id"' . $class . ' name="' . $this-&gt;name . '" value="' . $value . '" /&gt;';

        return $html;
</codefragment>
  </duplication>
  <duplication lines="38" tokens="33">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/folder.php" line="208"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/location.php" line="95"/>
    <codefragment>        $data = JFactory::getApplication()-&gt;getUserState('com_biblestudy.edit.folder.data', array());

        if (empty($data))
        {
            $data = $this-&gt;getItem();
        }

        return $data;
    }

    /**
     * Method to check-out a row for editing.
     *
     * @param   integer $pk  The numeric id of the primary key.
     *
     * @return  boolean  False on failure or error, true otherwise.
     *
     * @since   11.1
     */
    public function checkout($pk = null)
    {
        return $pk;
    }

    /**
     * Clean the cache
     *
     * @param   string  $group      The cache group
     * @param   integer $client_id  The ID of the client
     *
     * @return  void
     *
     * @since    1.6
     */
    protected function cleanCache($group = null, $client_id = 0)
    {
        parent::cleanCache('com_biblestudy');
        parent::cleanCache('mod_biblestudy');
</codefragment>
  </duplication>
  <duplication lines="21" tokens="46">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/comments.php" line="186"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/messages.php" line="559"/>
    <codefragment>    public function getItems()
    {
        $items = parent::getItems();
        $app   = JFactory::getApplication();

        if ($app-&gt;isSite())
        {
            $user   = JFactory::getUser();
            $groups = $user-&gt;getAuthorisedViewLevels();

            for ($x = 0, $count = count($items); $x &lt; $count; $x++)
            {
                // Check the access level. Remove articles the user shouldn't see
                if (!in_array($items[$x]-&gt;access, $groups))
                {
                    unset($items[$x]);
                }
            }
        }

        return $items;
</codefragment>
  </duplication>
  <duplication lines="10" tokens="5">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/location.php" line="21"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/messagetype.php" line="21"/>
    <codefragment>class BiblestudyModelLocation extends JModelAdmin
{

    /**
     * Method to store a record
     *
     * @access    public
     * @return    boolean    True on success
     */
    public function store()
</codefragment>
  </duplication>
  <duplication lines="19" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/folder.php" line="227"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/messagetype.php" line="159"/>
    <codefragment>    public function checkout($pk = null)
    {
        return $pk;
    }

    /**
     * Clean the cache
     *
     * @param   string  $group      The cache group
     * @param   integer $client_id  The ID of the client
     *
     * @return  void
     *
     * @since    1.6
     */
    protected function cleanCache($group = null, $client_id = 0)
    {
        parent::cleanCache('com_biblestudy');
        parent::cleanCache('mod_biblestudy');
</codefragment>
  </duplication>
  <duplication lines="9" tokens="5">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/location.php" line="21"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/mimetype.php" line="21"/>
    <codefragment>class BiblestudyModelLocation extends JModelAdmin
{

    /**
     * Method to store a record
     *
     * @access    public
     * @return    boolean    True on success
     */
</codefragment>
  </duplication>
  <duplication lines="38" tokens="33">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/folder.php" line="208"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/mimetype.php" line="94"/>
    <codefragment>        $data = JFactory::getApplication()-&gt;getUserState('com_biblestudy.edit.folder.data', array());

        if (empty($data))
        {
            $data = $this-&gt;getItem();
        }

        return $data;
    }

    /**
     * Method to check-out a row for editing.
     *
     * @param   integer $pk  The numeric id of the primary key.
     *
     * @return  boolean  False on failure or error, true otherwise.
     *
     * @since   11.1
     */
    public function checkout($pk = null)
    {
        return $pk;
    }

    /**
     * Clean the cache
     *
     * @param   string  $group      The cache group
     * @param   integer $client_id  The ID of the client
     *
     * @return  void
     *
     * @since    1.6
     */
    protected function cleanCache($group = null, $client_id = 0)
    {
        parent::cleanCache('com_biblestudy');
        parent::cleanCache('mod_biblestudy');
</codefragment>
  </duplication>
  <duplication lines="19" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/folder.php" line="227"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/podcast.php" line="120"/>
    <codefragment>    public function checkout($pk = null)
    {
        return $pk;
    }

    /**
     * Clean the cache
     *
     * @param   string  $group      The cache group
     * @param   integer $client_id  The ID of the client
     *
     * @return  void
     *
     * @since    1.6
     */
    protected function cleanCache($group = null, $client_id = 0)
    {
        parent::cleanCache('com_biblestudy');
        parent::cleanCache('mod_biblestudy');
</codefragment>
  </duplication>
  <duplication lines="10" tokens="28">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/mediaimages.php" line="117"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/podcasts.php" line="151"/>
    <codefragment>                $query-&gt;where('(media.media_image_name LIKE ' . $search . ' OR media.path2 LIKE ' . $search . ')');
            }
        }

        // Add the list ordering clause
        $orderCol  = $this-&gt;state-&gt;get('list.ordering');
        $orderDirn = $this-&gt;state-&gt;get('list.direction');
        $query-&gt;order($db-&gt;escape($orderCol . ' ' . $orderDirn));

        return $query;
</codefragment>
  </duplication>
  <duplication lines="59" tokens="83">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/folder.php" line="21"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/serie.php" line="21"/>
    <codefragment>class BiblestudyModelFolder extends JModelAdmin
{

    /**
     * @var        string    The prefix to use with controller messages.
     * @since    1.6
     */
    protected $text_prefix = 'COM_BIBLESTUDY';

    /**
     * Batch copy items to a new category or current.
     *
     * @param   integer $value     The new category.
     * @param   array   $pks       An array of row IDs.
     * @param   array   $contexts  An array of item contexts.
     *
     * @return  mixed  An array of new IDs on success, boolean false on failure.
     *
     * @since    11.1
     */
    protected function batchCopy($value, $pks, $contexts)
    {
        $app   = JFactory::getApplication();
        $table = $this-&gt;getTable();
        $i     = 0;

        // Check that the user has create permission for the component
        $extension = $app-&gt;input-&gt;get('option', '');
        $user      = JFactory::getUser();

        if (!$user-&gt;authorise('core.create', $extension))
        {
            $app-&gt;enqueueMessage(JText::_('JLIB_APPLICATION_ERROR_BATCH_CANNOT_CREATE'), 'error');

            return false;
        }

        // Parent exists so we let's proceed
        while (!empty($pks))
        {
            // Pop the first ID off the stack
            $pk = array_shift($pks);

            $table-&gt;reset();

            // Check that the row actually exists
            if (!$table-&gt;load($pk))
            {
                if ($error = $table-&gt;getError())
                {
                    // Fatal error
                    $app-&gt;enqueueMessage($error, 'error');

                    return false;
                }
                else
                {
                    // Not fatal error
                    $app-&gt;enqueueMessage(JText::sprintf('JLIB_APPLICATION_ERROR_BATCH_MOVE_ROW_NOT_FOUND', $pk));
</codefragment>
  </duplication>
  <duplication lines="34" tokens="57">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/comments.php" line="173"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/series.php" line="236"/>
    <codefragment>        $query-&gt;order($db-&gt;escape($orderCol . ' ' . $orderDirn));

        return $query;
    }

    /**
     * Method to get a list of articles.
     * Overridden to add a check for access levels.
     *
     * @return    mixed    An array of data items on success, false on failure.
     *
     * @since    1.6.1
     */
    public function getItems()
    {
        $items = parent::getItems();
        $app   = JFactory::getApplication();

        if ($app-&gt;isSite())
        {
            $user   = JFactory::getUser();
            $groups = $user-&gt;getAuthorisedViewLevels();

            for ($x = 0, $count = count($items); $x &lt; $count; $x++)
            {
                // Check the access level. Remove articles the user shouldn't see
                if (!in_array($items[$x]-&gt;access, $groups))
                {
                    unset($items[$x]);
                }
            }
        }

        return $items;
</codefragment>
  </duplication>
  <duplication lines="38" tokens="33">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/folder.php" line="208"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/server.php" line="140"/>
    <codefragment>        $data = JFactory::getApplication()-&gt;getUserState('com_biblestudy.edit.folder.data', array());

        if (empty($data))
        {
            $data = $this-&gt;getItem();
        }

        return $data;
    }

    /**
     * Method to check-out a row for editing.
     *
     * @param   integer $pk  The numeric id of the primary key.
     *
     * @return  boolean  False on failure or error, true otherwise.
     *
     * @since   11.1
     */
    public function checkout($pk = null)
    {
        return $pk;
    }

    /**
     * Clean the cache
     *
     * @param   string  $group      The cache group
     * @param   integer $client_id  The ID of the client
     *
     * @return  void
     *
     * @since    1.6
     */
    protected function cleanCache($group = null, $client_id = 0)
    {
        parent::cleanCache('com_biblestudy');
        parent::cleanCache('mod_biblestudy');
</codefragment>
  </duplication>
  <duplication lines="38" tokens="33">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/folder.php" line="208"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/share.php" line="132"/>
    <codefragment>        $data = JFactory::getApplication()-&gt;getUserState('com_biblestudy.edit.folder.data', array());

        if (empty($data))
        {
            $data = $this-&gt;getItem();
        }

        return $data;
    }

    /**
     * Method to check-out a row for editing.
     *
     * @param   integer $pk  The numeric id of the primary key.
     *
     * @return  boolean  False on failure or error, true otherwise.
     *
     * @since   11.1
     */
    public function checkout($pk = null)
    {
        return $pk;
    }

    /**
     * Clean the cache
     *
     * @param   string  $group      The cache group
     * @param   integer $client_id  The ID of the client
     *
     * @return  void
     *
     * @since    1.6
     */
    protected function cleanCache($group = null, $client_id = 0)
    {
        parent::cleanCache('com_biblestudy');
        parent::cleanCache('mod_biblestudy');
</codefragment>
  </duplication>
  <duplication lines="6" tokens="8">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/message.php" line="801"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/style.php" line="206"/>
    <codefragment>                return false;
            }
        }

        // Clean the cache
        $this-&gt;cleanCache();
</codefragment>
  </duplication>
  <duplication lines="19" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/folder.php" line="227"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/teacher.php" line="178"/>
    <codefragment>    public function checkout($pk = null)
    {
        return $pk;
    }

    /**
     * Clean the cache
     *
     * @param   string  $group      The cache group
     * @param   integer $client_id  The ID of the client
     *
     * @return  void
     *
     * @since    1.6
     */
    protected function cleanCache($group = null, $client_id = 0)
    {
        parent::cleanCache('com_biblestudy');
        parent::cleanCache('mod_biblestudy');
</codefragment>
  </duplication>
  <duplication lines="10" tokens="28">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/mediaimages.php" line="117"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/templates.php" line="144"/>
    <codefragment>                $query-&gt;where('(media.media_image_name LIKE ' . $search . ' OR media.path2 LIKE ' . $search . ')');
            }
        }

        // Add the list ordering clause
        $orderCol  = $this-&gt;state-&gt;get('list.ordering');
        $orderDirn = $this-&gt;state-&gt;get('list.direction');
        $query-&gt;order($db-&gt;escape($orderCol . ' ' . $orderDirn));

        return $query;
</codefragment>
  </duplication>
  <duplication lines="38" tokens="33">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/folder.php" line="208"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/topic.php" line="83"/>
    <codefragment>        $data = JFactory::getApplication()-&gt;getUserState('com_biblestudy.edit.folder.data', array());

        if (empty($data))
        {
            $data = $this-&gt;getItem();
        }

        return $data;
    }

    /**
     * Method to check-out a row for editing.
     *
     * @param   integer $pk  The numeric id of the primary key.
     *
     * @return  boolean  False on failure or error, true otherwise.
     *
     * @since   11.1
     */
    public function checkout($pk = null)
    {
        return $pk;
    }

    /**
     * Clean the cache
     *
     * @param   string  $group      The cache group
     * @param   integer $client_id  The ID of the client
     *
     * @return  void
     *
     * @since    1.6
     */
    protected function cleanCache($group = null, $client_id = 0)
    {
        parent::cleanCache('com_biblestudy');
        parent::cleanCache('mod_biblestudy');
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/comment.php" line="122"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/folder.php" line="119"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/location.php" line="112"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/mediaimage.php" line="147"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/messagetype.php" line="112"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/mimetype.php" line="119"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/podcast.php" line="252"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/serie.php" line="101"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="6" tokens="21">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="208"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/server.php" line="167"/>
    <codefragment>    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/studytopics.php" line="84"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="22" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/teacher.php" line="97"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');

        return $asset-&gt;id;
</codefragment>
  </duplication>
  <duplication lines="11" tokens="25">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/style.php" line="173"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/templatecode.php" line="262"/>
    <codefragment>        if (JFile::exists($file))
        {
            if (!JFile::delete($file))
            {
                $this-&gt;setError(JText::_('JBS_STYLE_FILENAME_NOT_DELETED'));

                return false;
            }
        }

        return parent::delete($pk);
</codefragment>
  </duplication>
  <duplication lines="38" tokens="70">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="50"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
                            onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="asc" &lt;?php if ($listDirn == 'asc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_ASCENDING'); ?&gt;&lt;/option&gt;
</codefragment>
  </duplication>
  <duplication lines="14" tokens="27">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="230"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="205"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php // Load the batch processing form. ?&gt;
            &lt;?php echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="29" tokens="39">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default_batch.php" line="10"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default_batch.php" line="10"/>
    <codefragment>defined('_JEXEC') or die;

$published = $this-&gt;state-&gt;get('filter.published');
?&gt;
&lt;div class="modal hide fade" id="collapseModal"&gt;
    &lt;div class="modal-header"&gt;
        &lt;?php if (BIBLESTUDY_CHECKREL)
        {
            ?&gt;
            &lt;button type="button" role="presentation" class="close" data-dismiss="modal"&gt;x&lt;/button&gt;&lt;?php } ?&gt;
        &lt;h3&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_OPTIONS'); ?&gt;&lt;/h3&gt;
    &lt;/div&gt;
    &lt;div class="modal-body"&gt;
        &lt;p&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_TIP'); ?&gt;&lt;/p&gt;

        &lt;div class="control-group"&gt;
            &lt;div class="controls"&gt;
                &lt;?php echo JHtml::_('batch.access'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;

    &lt;/div&gt;
    &lt;div class="modal-footer"&gt;
        &lt;button class="btn" type="button" onclick="document.id('batch-folders-id');document.id('batch-access').value=''"
                data-dismiss="modal"&gt;
            &lt;?php echo JText::_('JCANCEL'); ?&gt;
        &lt;/button&gt;
        &lt;button class="btn btn-primary" type="submit" onclick="Joomla.submitbutton('comment.batch');"&gt;
            &lt;?php echo JText::_('JGLOBAL_BATCH_PROCESS'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="93">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/view.html.php" line="83"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
        $options[] = JHtml::_('select.option', '8', JText::_('J8'));
</codefragment>
  </duplication>
  <duplication lines="12" tokens="31">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folder/tmpl/edit.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/location/tmpl/edit.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

// Load the tooltip behavior.
JHtml::_('behavior.tooltip');
JHtml::_('behavior.formvalidation');
JHtml::_('behavior.keepalive');
if (BIBLESTUDY_CHECKREL)
    JHtml::_('formbehavior.chosen', 'select');

// Create shortcut to parameters.
$params = $this-&gt;state-&gt;get('params');
$params = $params-&gt;toArray();
</codefragment>
  </duplication>
  <duplication lines="13" tokens="25">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/locations/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');
</codefragment>
  </duplication>
  <duplication lines="55" tokens="111">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/locations/tmpl/default.php" line="50"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
                            onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="asc" &lt;?php if ($listDirn == 'asc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_ASCENDING'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="desc" &lt;?php if ($listDirn == 'desc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_DESCENDING'); ?&gt;&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right"&gt;
                    &lt;label for="sortTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_BY'); ?&gt;&lt;/label&gt;
                    &lt;select name="sortTable" id="sortTable" class="input-medium" onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_BY'); ?&gt;&lt;/option&gt;
                        &lt;?php echo JHtml::_('select.options', $sortFields, 'value', 'text', $listOrder); ?&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;?php if (!BIBLESTUDY_CHECKREL): ?&gt;
                    &lt;div class="clearfix"&gt;&lt;/div&gt;
                    &lt;div class="btn-group pull-right"&gt;
                        &lt;label for="filter_published" id="filter_published"
                               class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_BY'); ?&gt;&lt;/label&gt;
</codefragment>
  </duplication>
  <duplication lines="14" tokens="27">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="230"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/locations/tmpl/default.php" line="212"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php // Load the batch processing form. ?&gt;
            &lt;?php echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="29" tokens="39">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default_batch.php" line="10"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/locations/tmpl/default_batch.php" line="10"/>
    <codefragment>defined('_JEXEC') or die;

$published = $this-&gt;state-&gt;get('filter.published');
?&gt;
&lt;div class="modal hide fade" id="collapseModal"&gt;
    &lt;div class="modal-header"&gt;
        &lt;?php if (BIBLESTUDY_CHECKREL)
        {
            ?&gt;
            &lt;button type="button" role="presentation" class="close" data-dismiss="modal"&gt;x&lt;/button&gt;&lt;?php } ?&gt;
        &lt;h3&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_OPTIONS'); ?&gt;&lt;/h3&gt;
    &lt;/div&gt;
    &lt;div class="modal-body"&gt;
        &lt;p&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_TIP'); ?&gt;&lt;/p&gt;

        &lt;div class="control-group"&gt;
            &lt;div class="controls"&gt;
                &lt;?php echo JHtml::_('batch.access'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;

    &lt;/div&gt;
    &lt;div class="modal-footer"&gt;
        &lt;button class="btn" type="button" onclick="document.id('batch-folders-id');document.id('batch-access').value=''"
                data-dismiss="modal"&gt;
            &lt;?php echo JText::_('JCANCEL'); ?&gt;
        &lt;/button&gt;
        &lt;button class="btn btn-primary" type="submit" onclick="Joomla.submitbutton('comment.batch');"&gt;
            &lt;?php echo JText::_('JGLOBAL_BATCH_PROCESS'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="99">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/locations/view.html.php" line="83"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
        $options[] = JHtml::_('select.option', '8', JText::_('J8'));
</codefragment>
  </duplication>
  <duplication lines="21" tokens="43">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comment/tmpl/edit.php" line="134"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafile/tmpl/edit.php" line="456"/>
    <codefragment>                    &lt;?php echo $this-&gt;form-&gt;getLabel('published'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('published'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('access'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('access'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('language'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('language'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="8" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafiles/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::addIncludePath(JPATH_COMPONENT . '/helpers/html');
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
</codefragment>
  </duplication>
  <duplication lines="34" tokens="72">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafiles/tmpl/default.php" line="57"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
</codefragment>
  </duplication>
  <duplication lines="14" tokens="27">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="230"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafiles/tmpl/default.php" line="349"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php // Load the batch processing form. ?&gt;
            &lt;?php echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="99">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafiles/view.html.php" line="92"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
        $options[] = JHtml::_('select.option', '8', JText::_('J8'));
</codefragment>
  </duplication>
  <duplication lines="14" tokens="30">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::addIncludePath(JPATH_COMPONENT . '/helpers/html');
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');
</codefragment>
  </duplication>
  <duplication lines="40" tokens="82">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="51"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
                            onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="asc" &lt;?php if ($listDirn == 'asc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_ASCENDING'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="desc" &lt;?php if ($listDirn == 'desc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_DESCENDING'); ?&gt;&lt;/option&gt;
</codefragment>
  </duplication>
  <duplication lines="16" tokens="84">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/view.html.php" line="99"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
</codefragment>
  </duplication>
  <duplication lines="37" tokens="79">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messages/tmpl/default.php" line="59"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
                            onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/option&gt;
                        &lt;option
</codefragment>
  </duplication>
  <duplication lines="21" tokens="55">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="221"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messages/tmpl/default.php" line="334"/>
    <codefragment>                            &lt;?php if ($item-&gt;language == '*'): ?&gt;
                                &lt;?php echo JText::alt('JALL', 'language'); ?&gt;
                            &lt;?php else: ?&gt;
                                &lt;?php echo $item-&gt;language_title ? $this-&gt;escape($item-&gt;language_title) : JText::_('JUNDEFINED'); ?&gt;
                            &lt;?php endif; ?&gt;
                        &lt;/td&gt;

                        &lt;/td&gt;
                        &lt;td class="center hidden-phone"&gt;
                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php // Load the batch processing form. ?&gt;
            &lt;?php echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
</codefragment>
  </duplication>
  <duplication lines="11" tokens="16">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafiles/tmpl/default_batch.php" line="53"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messages/tmpl/default_batch.php" line="47"/>
    <codefragment>                &lt;?php echo JHtml::_('batch.language'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="modal-footer"&gt;
        &lt;button class="btn" type="button"
                onclick="document.id('batch-mediafiles-id');document.id('batch-access').value=''" data-dismiss="modal"&gt;
            &lt;?php echo JText::_('JCANCEL'); ?&gt;
        &lt;/button&gt;
        &lt;button class="btn btn-primary" type="submit" onclick="Joomla.submitbutton('mediafile.batch');"&gt;
            &lt;?php echo JText::_('JGLOBAL_BATCH_PROCESS'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="99">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messages/view.html.php" line="128"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
        $options[] = JHtml::_('select.option', '8', JText::_('J8'));
</codefragment>
  </duplication>
  <duplication lines="8" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folder/tmpl/edit.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetype/tmpl/edit.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

// Load the tooltip behavior.
JHtml::_('behavior.tooltip');
JHtml::_('behavior.formvalidation');
JHtml::_('behavior.keepalive');
if (BIBLESTUDY_CHECKREL)
    JHtml::_('formbehavior.chosen', 'select');
</codefragment>
  </duplication>
  <duplication lines="20" tokens="39">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimage/tmpl/edit.php" line="110"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetype/tmpl/edit.php" line="88"/>
    <codefragment>                &lt;?php echo JHtml::_('form.token'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- Begin Sidebar --&gt;
        &lt;div class="span2 form-vertical"&gt;
            &lt;h4&gt;&lt;?php echo JText::_('JDETAILS'); ?&gt;&lt;/h4&gt;
            &lt;hr/&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('id'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('id'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('published'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
</codefragment>
  </duplication>
  <duplication lines="13" tokens="25">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetypes/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');
</codefragment>
  </duplication>
  <duplication lines="20" tokens="40">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetypes/tmpl/default.php" line="50"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
</codefragment>
  </duplication>
  <duplication lines="24" tokens="33">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="196"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetypes/tmpl/default.php" line="178"/>
    <codefragment>                                    endif;

                                    // Render dropdown list
                                    echo JHtml::_('dropdown.render');
                                }
                                ?&gt;
                            &lt;/div&gt;
                        &lt;/td&gt;
                        &lt;td class="center hidden-phone"&gt;
                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
        &lt;/div&gt;
</codefragment>
  </duplication>
  <duplication lines="30" tokens="39">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default_batch.php" line="10"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetypes/tmpl/default_batch.php" line="10"/>
    <codefragment>defined('_JEXEC') or die;

$published = $this-&gt;state-&gt;get('filter.published');
?&gt;
&lt;div class="modal hide fade" id="collapseModal"&gt;
    &lt;div class="modal-header"&gt;
        &lt;?php if (BIBLESTUDY_CHECKREL)
        {
            ?&gt;
            &lt;button type="button" role="presentation" class="close" data-dismiss="modal"&gt;x&lt;/button&gt;&lt;?php } ?&gt;
        &lt;h3&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_OPTIONS'); ?&gt;&lt;/h3&gt;
    &lt;/div&gt;
    &lt;div class="modal-body"&gt;
        &lt;p&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_TIP'); ?&gt;&lt;/p&gt;

        &lt;div class="control-group"&gt;
            &lt;div class="controls"&gt;
                &lt;?php echo JHtml::_('batch.access'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;

    &lt;/div&gt;
    &lt;div class="modal-footer"&gt;
        &lt;button class="btn" type="button" onclick="document.id('batch-folders-id');document.id('batch-access').value=''"
                data-dismiss="modal"&gt;
            &lt;?php echo JText::_('JCANCEL'); ?&gt;
        &lt;/button&gt;
        &lt;button class="btn btn-primary" type="submit" onclick="Joomla.submitbutton('comment.batch');"&gt;
            &lt;?php echo JText::_('JGLOBAL_BATCH_PROCESS'); ?&gt;
        &lt;/button&gt;
</codefragment>
  </duplication>
  <duplication lines="10" tokens="11">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messages/tmpl/modal.php" line="150"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetypes/tmpl/modal.php" line="101"/>
    <codefragment>        &lt;?php endforeach; ?&gt;
    &lt;/table&gt;
    &lt;div&gt;
        &lt;input type="hidden" name="task" value=""/&gt;
        &lt;input type="hidden" name="boxchecked" value="0"/&gt;
        &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
        &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
        &lt;?php echo JHtml::_('form.token'); ?&gt;
    &lt;/div&gt;
&lt;/form&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="99">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetypes/view.html.php" line="83"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
        $options[] = JHtml::_('select.option', '8', JText::_('J8'));
</codefragment>
  </duplication>
  <duplication lines="6" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/migration.php" line="143"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/migration/view.html.php" line="102"/>
    <codefragment>    private function loadStack()
    {
        $session = JFactory::getSession();
        $stack   = $session-&gt;get('migration_stack', '', 'biblestudy');

        if (empty($stack))
</codefragment>
  </duplication>
  <duplication lines="7" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folder/tmpl/edit.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mimetype/tmpl/edit.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

// Load the tooltip behavior.
JHtml::_('behavior.tooltip');
JHtml::_('behavior.formvalidation');
JHtml::_('behavior.keepalive');
if (BIBLESTUDY_CHECKREL)
</codefragment>
  </duplication>
  <duplication lines="30" tokens="59">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetype/tmpl/edit.php" line="80"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mimetype/tmpl/edit.php" line="76"/>
    <codefragment>                &lt;?php if ($this-&gt;canDo-&gt;get('core.admin')): ?&gt;
                    &lt;div class="tab-pane" id="permissions"&gt;
                        &lt;?php echo $this-&gt;form-&gt;getInput('rules'); ?&gt;
                    &lt;/div&gt;
                &lt;?php endif; ?&gt;
            &lt;/div&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="return" value="&lt;?php echo $input-&gt;getCmd('return'); ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
        &lt;/div&gt;
        &lt;!-- Begin Sidebar --&gt;
        &lt;div class="span2 form-vertical"&gt;
            &lt;h4&gt;&lt;?php echo JText::_('JDETAILS'); ?&gt;&lt;/h4&gt;
            &lt;hr/&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('id'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('id'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('published'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('published'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
</codefragment>
  </duplication>
  <duplication lines="13" tokens="25">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mimetypes/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');
</codefragment>
  </duplication>
  <duplication lines="55" tokens="111">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mimetypes/tmpl/default.php" line="50"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
                            onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="asc" &lt;?php if ($listDirn == 'asc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_ASCENDING'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="desc" &lt;?php if ($listDirn == 'desc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_DESCENDING'); ?&gt;&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right"&gt;
                    &lt;label for="sortTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_BY'); ?&gt;&lt;/label&gt;
                    &lt;select name="sortTable" id="sortTable" class="input-medium" onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_BY'); ?&gt;&lt;/option&gt;
                        &lt;?php echo JHtml::_('select.options', $sortFields, 'value', 'text', $listOrder); ?&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;?php if (!BIBLESTUDY_CHECKREL): ?&gt;
                    &lt;div class="clearfix"&gt;&lt;/div&gt;
                    &lt;div class="btn-group pull-right"&gt;
                        &lt;label for="filter_published" id="filter_published"
                               class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_BY'); ?&gt;&lt;/label&gt;
</codefragment>
  </duplication>
  <duplication lines="9" tokens="13">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="169"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mimetypes/tmpl/default.php" line="169"/>
    <codefragment>                                &lt;?php endif; ?&gt;
                            &lt;/div&gt;
                            &lt;div class="pull-left"&gt;
                                &lt;?php
                                if (BIBLESTUDY_CHECKREL)
                                {
                                    // Create dropdown items
                                    JHtml::_('dropdown.edit', $item-&gt;id, 'folder.');
                                    JHtml::_('dropdown.divider');
</codefragment>
  </duplication>
  <duplication lines="14" tokens="22">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="228"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mimetypes/tmpl/default.php" line="208"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="15" tokens="90">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mimetypes/view.html.php" line="74"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
</codefragment>
  </duplication>
  <duplication lines="13" tokens="25">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/podcasts/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');
</codefragment>
  </duplication>
  <duplication lines="28" tokens="51">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/podcasts/tmpl/default.php" line="50"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
</codefragment>
  </duplication>
  <duplication lines="14" tokens="22">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="228"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/podcasts/tmpl/default.php" line="206"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="43">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comment/tmpl/edit.php" line="134"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/serie/tmpl/edit.php" line="146"/>
    <codefragment>                    &lt;?php echo $this-&gt;form-&gt;getLabel('published'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('published'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('access'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('access'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;

            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
</codefragment>
  </duplication>
  <duplication lines="7" tokens="18">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/series/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
</codefragment>
  </duplication>
  <duplication lines="44" tokens="101">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/series/tmpl/default.php" line="56"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
                            onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="asc" &lt;?php if ($listDirn == 'asc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_ASCENDING'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="desc" &lt;?php if ($listDirn == 'desc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_DESCENDING'); ?&gt;&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right"&gt;
                    &lt;label for="sortTable"
</codefragment>
  </duplication>
  <duplication lines="21" tokens="55">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="221"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/series/tmpl/default.php" line="246"/>
    <codefragment>                            &lt;?php if ($item-&gt;language == '*'): ?&gt;
                                &lt;?php echo JText::alt('JALL', 'language'); ?&gt;
                            &lt;?php else: ?&gt;
                                &lt;?php echo $item-&gt;language_title ? $this-&gt;escape($item-&gt;language_title) : JText::_('JUNDEFINED'); ?&gt;
                            &lt;?php endif; ?&gt;
                        &lt;/td&gt;

                        &lt;/td&gt;
                        &lt;td class="center hidden-phone"&gt;
                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php // Load the batch processing form. ?&gt;
            &lt;?php echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="21">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafiles/tmpl/default_batch.php" line="48"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/series/tmpl/default_batch.php" line="27"/>
    <codefragment>                &lt;?php echo JHtml::_('batch.access'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="control-group"&gt;
            &lt;div class="controls"&gt;
                &lt;?php echo JHtml::_('batch.language'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="modal-footer"&gt;
        &lt;button class="btn" type="button"
                onclick="document.id('batch-mediafiles-id');document.id('batch-access').value=''" data-dismiss="modal"&gt;
            &lt;?php echo JText::_('JCANCEL'); ?&gt;
        &lt;/button&gt;
        &lt;button class="btn btn-primary" type="submit" onclick="Joomla.submitbutton('mediafile.batch');"&gt;
            &lt;?php echo JText::_('JGLOBAL_BATCH_PROCESS'); ?&gt;
        &lt;/button&gt;
</codefragment>
  </duplication>
  <duplication lines="13" tokens="16">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messagetypes/tmpl/modal.php" line="98"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/series/tmpl/modal.php" line="92"/>
    <codefragment>                    &lt;?php echo (int) $item-&gt;id; ?&gt;
                &lt;/td&gt;
            &lt;/tr&gt;
        &lt;?php endforeach; ?&gt;
        &lt;/tbody&gt;
    &lt;/table&gt;

    &lt;div&gt;
        &lt;input type="hidden" name="task" value=""/&gt;
        &lt;input type="hidden" name="boxchecked" value="0"/&gt;
        &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
        &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
        &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="99">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/series/view.html.php" line="83"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
        $options[] = JHtml::_('select.option', '8', JText::_('J8'));
</codefragment>
  </duplication>
  <duplication lines="7" tokens="26">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/podcasts/view.html.php" line="141"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/series/view.html.php" line="177"/>
    <codefragment>        if (BIBLESTUDY_CHECKREL)
        {
            JHtmlSidebar::setAction('index.php?option=com_biblestudy&amp;view=series');

            JHtmlSidebar::addFilter(
                JText::_('JOPTION_SELECT_PUBLISHED'), 'filter_published',
                JHtml::_('select.options', JHtml::_('jgrid.publishedOptions'), 'value', 'text', $this-&gt;state-&gt;get('filter.published'), true)
</codefragment>
  </duplication>
  <duplication lines="14" tokens="30">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messages/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/servers/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;
JHtml::addIncludePath(JPATH_COMPONENT . '/helpers/html');

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');
</codefragment>
  </duplication>
  <duplication lines="28" tokens="51">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/servers/tmpl/default.php" line="51"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
</codefragment>
  </duplication>
  <duplication lines="23" tokens="33">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="196"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/servers/tmpl/default.php" line="180"/>
    <codefragment>                                    endif;

                                    // Render dropdown list
                                    echo JHtml::_('dropdown.render');
                                }
                                ?&gt;
                            &lt;/div&gt;
                        &lt;/td&gt;
                        &lt;td class="center hidden-phone"&gt;
                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="29" tokens="39">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default_batch.php" line="10"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/servers/tmpl/default_batch.php" line="10"/>
    <codefragment>defined('_JEXEC') or die;

$published = $this-&gt;state-&gt;get('filter.published');
?&gt;
&lt;div class="modal hide fade" id="collapseModal"&gt;
    &lt;div class="modal-header"&gt;
        &lt;?php if (BIBLESTUDY_CHECKREL)
        {
            ?&gt;
            &lt;button type="button" role="presentation" class="close" data-dismiss="modal"&gt;x&lt;/button&gt;&lt;?php } ?&gt;
        &lt;h3&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_OPTIONS'); ?&gt;&lt;/h3&gt;
    &lt;/div&gt;
    &lt;div class="modal-body"&gt;
        &lt;p&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_TIP'); ?&gt;&lt;/p&gt;

        &lt;div class="control-group"&gt;
            &lt;div class="controls"&gt;
                &lt;?php echo JHtml::_('batch.access'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;

    &lt;/div&gt;
    &lt;div class="modal-footer"&gt;
        &lt;button class="btn" type="button" onclick="document.id('batch-folders-id');document.id('batch-access').value=''"
                data-dismiss="modal"&gt;
            &lt;?php echo JText::_('JCANCEL'); ?&gt;
        &lt;/button&gt;
        &lt;button class="btn btn-primary" type="submit" onclick="Joomla.submitbutton('comment.batch');"&gt;
            &lt;?php echo JText::_('JGLOBAL_BATCH_PROCESS'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="99">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/servers/view.html.php" line="74"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
        $options[] = JHtml::_('select.option', '8', JText::_('J8'));
</codefragment>
  </duplication>
  <duplication lines="7" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folder/tmpl/edit.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/share/tmpl/edit.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

// Load the tooltip behavior.
JHtml::_('behavior.tooltip');
JHtml::_('behavior.formvalidation');
JHtml::_('behavior.keepalive');
if (BIBLESTUDY_CHECKREL)
</codefragment>
  </duplication>
  <duplication lines="28" tokens="54">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimage/tmpl/edit.php" line="103"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/share/tmpl/edit.php" line="95"/>
    <codefragment>                &lt;?php if ($this-&gt;canDo-&gt;get('core.admin')): ?&gt;
                    &lt;div class="tab-pane" id="fieldsetrules"&gt;
                        &lt;?php echo $this-&gt;form-&gt;getInput('rules'); ?&gt;
                    &lt;/div&gt;

                &lt;?php endif; ?&gt;
                &lt;input type="hidden" name="task" value=""/&gt;
                &lt;?php echo JHtml::_('form.token'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- Begin Sidebar --&gt;
        &lt;div class="span2 form-vertical"&gt;
            &lt;h4&gt;&lt;?php echo JText::_('JDETAILS'); ?&gt;&lt;/h4&gt;
            &lt;hr/&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('id'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('id'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('published'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('published'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="13" tokens="25">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/shares/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');
</codefragment>
  </duplication>
  <duplication lines="28" tokens="51">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/shares/tmpl/default.php" line="50"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
</codefragment>
  </duplication>
  <duplication lines="24" tokens="28">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="218"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/shares/tmpl/default.php" line="184"/>
    <codefragment>                                    endif;

                                    // Render dropdown list
                                    echo JHtml::_('dropdown.render');
                                }
                                ?&gt;
                            &lt;/div&gt;
                        &lt;/td&gt;

                        &lt;td class="center hidden-phone"&gt;
                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="8" tokens="70">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="83"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/shares/view.html.php" line="91"/>
    <codefragment>        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
</codefragment>
  </duplication>
  <duplication lines="30" tokens="54">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimage/tmpl/edit.php" line="103"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/style/tmpl/edit.php" line="68"/>
    <codefragment>                &lt;?php if ($this-&gt;canDo-&gt;get('core.admin')): ?&gt;
                    &lt;div class="tab-pane" id="fieldsetrules"&gt;
                        &lt;?php echo $this-&gt;form-&gt;getInput('rules'); ?&gt;
                    &lt;/div&gt;

                &lt;?php endif; ?&gt;
                &lt;input type="hidden" name="task" value=""/&gt;
                &lt;?php echo JHtml::_('form.token'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- Begin Sidebar --&gt;
        &lt;div class="span2 form-vertical"&gt;
            &lt;h4&gt;&lt;?php echo JText::_('JDETAILS'); ?&gt;&lt;/h4&gt;
            &lt;hr/&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('id'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('id'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('published'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('published'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
</codefragment>
  </duplication>
  <duplication lines="13" tokens="21">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/styles/tmpl/default.php" line="28"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
</codefragment>
  </duplication>
  <duplication lines="13" tokens="20">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="228"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/styles/tmpl/default.php" line="115"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
</codefragment>
  </duplication>
  <duplication lines="16" tokens="90">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/styles/view.html.php" line="73"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
</codefragment>
  </duplication>
  <duplication lines="8" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/teachers/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::addIncludePath(JPATH_COMPONENT . '/helpers/html');
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
</codefragment>
  </duplication>
  <duplication lines="34" tokens="77">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/teachers/tmpl/default.php" line="57"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
</codefragment>
  </duplication>
  <duplication lines="14" tokens="27">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="230"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/teachers/tmpl/default.php" line="282"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php // Load the batch processing form. ?&gt;
            &lt;?php echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="29" tokens="39">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default_batch.php" line="10"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/teachers/tmpl/default_batch.php" line="10"/>
    <codefragment>defined('_JEXEC') or die;

$published = $this-&gt;state-&gt;get('filter.published');
?&gt;
&lt;div class="modal hide fade" id="collapseModal"&gt;
    &lt;div class="modal-header"&gt;
        &lt;?php if (BIBLESTUDY_CHECKREL)
        {
            ?&gt;
            &lt;button type="button" role="presentation" class="close" data-dismiss="modal"&gt;x&lt;/button&gt;&lt;?php } ?&gt;
        &lt;h3&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_OPTIONS'); ?&gt;&lt;/h3&gt;
    &lt;/div&gt;
    &lt;div class="modal-body"&gt;
        &lt;p&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_TIP'); ?&gt;&lt;/p&gt;

        &lt;div class="control-group"&gt;
            &lt;div class="controls"&gt;
                &lt;?php echo JHtml::_('batch.access'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;

    &lt;/div&gt;
    &lt;div class="modal-footer"&gt;
        &lt;button class="btn" type="button" onclick="document.id('batch-folders-id');document.id('batch-access').value=''"
                data-dismiss="modal"&gt;
            &lt;?php echo JText::_('JCANCEL'); ?&gt;
        &lt;/button&gt;
        &lt;button class="btn btn-primary" type="submit" onclick="Joomla.submitbutton('comment.batch');"&gt;
            &lt;?php echo JText::_('JGLOBAL_BATCH_PROCESS'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="99">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="75"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/teachers/view.html.php" line="77"/>
    <codefragment>        if (count($errors = $this-&gt;get('Errors')))
        {
            JFactory::getApplication()-&gt;enqueueMessage(implode("\n", $errors), 'error');

            return false;
        }

        // Levels filter.
        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
        $options[] = JHtml::_('select.option', '8', JText::_('J8'));
</codefragment>
  </duplication>
  <duplication lines="12" tokens="29">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimage/tmpl/edit.php" line="119"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/template/tmpl/edit.php" line="535"/>
    <codefragment>                    &lt;?php echo $this-&gt;form-&gt;getLabel('id'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('id'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('published'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('published'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="7" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folder/tmpl/edit.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templatecode/tmpl/edit.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

// Load the tooltip behavior.
JHtml::_('behavior.tooltip');
JHtml::_('behavior.formvalidation');
JHtml::_('behavior.keepalive');
if (BIBLESTUDY_CHECKREL)
</codefragment>
  </duplication>
  <duplication lines="27" tokens="54">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimage/tmpl/edit.php" line="103"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templatecode/tmpl/edit.php" line="88"/>
    <codefragment>                &lt;?php if ($this-&gt;canDo-&gt;get('core.admin')): ?&gt;
                    &lt;div class="tab-pane" id="fieldsetrules"&gt;
                        &lt;?php echo $this-&gt;form-&gt;getInput('rules'); ?&gt;
                    &lt;/div&gt;

                &lt;?php endif; ?&gt;
                &lt;input type="hidden" name="task" value=""/&gt;
                &lt;?php echo JHtml::_('form.token'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;!-- Begin Sidebar --&gt;
        &lt;div class="span2 form-vertical"&gt;
            &lt;h4&gt;&lt;?php echo JText::_('JDETAILS'); ?&gt;&lt;/h4&gt;
            &lt;hr/&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('id'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getInput('id'); ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="control-group"&gt;
                &lt;div class="control-label"&gt;
                    &lt;?php echo $this-&gt;form-&gt;getLabel('published'); ?&gt;
                &lt;/div&gt;
                &lt;div class="controls"&gt;
</codefragment>
  </duplication>
  <duplication lines="15" tokens="29">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templatecodes/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');

$app = JFactory::getApplication();
</codefragment>
  </duplication>
  <duplication lines="36" tokens="81">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templatecodes/tmpl/default.php" line="50"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
                            onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/option&gt;
</codefragment>
  </duplication>
  <duplication lines="15" tokens="22">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="228"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templatecodes/tmpl/default.php" line="207"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
        &lt;/div&gt;
</codefragment>
  </duplication>
  <duplication lines="8" tokens="72">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="83"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templatecodes/view.html.php" line="112"/>
    <codefragment>        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
</codefragment>
  </duplication>
  <duplication lines="9" tokens="42">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafiles/view.html.php" line="250"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templatecodes/view.html.php" line="225"/>
    <codefragment>    protected function getSortFields()
    {
        return array(
            'study.studytitle'     =&gt; JText::_('JBS_CMN_STUDY_TITLE'),
            'mediatype.media_text' =&gt; JText::_('JBS_MED_MEDIA_TYPE'),
            'mediafile.filename'   =&gt; JText::_('JBS_MED_FILENAME'),
            'mediafile.ordering'   =&gt; JText::_('JGRID_HEADING_ORDERING'),
            'mediafile.published'  =&gt; JText::_('JSTATUS'),
            'mediafile.id'         =&gt; JText::_('JGRID_HEADING_ID')
</codefragment>
  </duplication>
  <duplication lines="13" tokens="25">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templates/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');
</codefragment>
  </duplication>
  <duplication lines="28" tokens="51">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templates/tmpl/default.php" line="50"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
</codefragment>
  </duplication>
  <duplication lines="23" tokens="28">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="218"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templates/tmpl/default.php" line="175"/>
    <codefragment>                                    endif;

                                    // Render dropdown list
                                    echo JHtml::_('dropdown.render');
                                }
                                ?&gt;
                            &lt;/div&gt;
                        &lt;/td&gt;

                        &lt;td class="center hidden-phone"&gt;
                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
</codefragment>
  </duplication>
  <duplication lines="7" tokens="55">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="83"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/templates/view.html.php" line="96"/>
    <codefragment>        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
</codefragment>
  </duplication>
  <duplication lines="7" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folder/tmpl/edit.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/topic/tmpl/edit.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

// Load the tooltip behavior.
JHtml::_('behavior.tooltip');
JHtml::_('behavior.formvalidation');
JHtml::_('behavior.keepalive');
if (BIBLESTUDY_CHECKREL)
</codefragment>
  </duplication>
  <duplication lines="13" tokens="25">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/folders/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/topics/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
}
JHtml::_('behavior.multiselect');
</codefragment>
  </duplication>
  <duplication lines="28" tokens="51">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="51"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/topics/tmpl/default.php" line="50"/>
    <codefragment>    &lt;?php if (!empty($this-&gt;sidebar)): ?&gt;
    &lt;div id="j-sidebar-container" class="span2"&gt;
        &lt;?php echo $this-&gt;sidebar; ?&gt;
    &lt;/div&gt;
    &lt;div id="j-main-container" class="span10"&gt;
        &lt;?php else : ?&gt;
        &lt;div id="j-main-container"&gt;
            &lt;?php endif; ?&gt;
            &lt;div id="filter-bar" class="btn-toolbar"&gt;
                &lt;div class="filter-search btn-group pull-left"&gt;
                    &lt;label for="filter_search"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
                    &lt;input type="text" name="filter_search"
                           placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                           id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                           title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-left hidden-phone"&gt;
                    &lt;button class="btn tip hasTooltip" type="submit"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                            class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
                    &lt;button class="btn tip hasTooltip" type="button"
                            onclick="document.id('filter_search').value='';this.form.submit();"
                            title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="limit"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
</codefragment>
  </duplication>
  <duplication lines="24" tokens="28">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="218"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/topics/tmpl/default.php" line="180"/>
    <codefragment>                                    endif;

                                    // Render dropdown list
                                    echo JHtml::_('dropdown.render');
                                }
                                ?&gt;
                            &lt;/div&gt;
                        &lt;/td&gt;

                        &lt;td class="center hidden-phone"&gt;
                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="8" tokens="72">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="83"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/topics/view.html.php" line="93"/>
    <codefragment>        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
        $options[] = JHtml::_('select.option', '6', JText::_('J6'));
        $options[] = JHtml::_('select.option', '7', JText::_('J7'));
</codefragment>
  </duplication>
  <duplication lines="867" tokens="1626">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/biblestudy.script.php" line="9"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/biblestudy.script.php" line="9"/>
    <codefragment>defined('_JEXEC') or die;
jimport('joomla.filesystem.folder');
jimport('joomla.filesystem.file');
/**
 * BibleStudy Install Script
 *
 * @package  BibleStudy.Admin
 * @since    7.0.0
 */
class Com_BiblestudyInstallerScript
{

    /**
     * The release value to be displayed and check against throughout this file.
     *
     * @var string
     */
    private $_release = '9.0.0';

    /**
     * Find minimum required joomla version for this extension.
     * It will be read from the version attribute (install tag) in the manifest file
     *
     * @var string
     */
    private $_minimum_joomla_release = '2.5.6';

    /**
     * Find minimum required PHP version for this extension.
     * It will be read from the version attribute (install tag) in the manifest file
     *
     * @var string
     */
    private $_minimum_php = '5.3.1';

    /**
     * The component's name
     *
     * @var string
     * */
    protected $biblestudy_extension = 'com_biblestudy';

    /**
     * $parent is the class calling this method.
     * $type is the type of change (install, update or discover_install, not uninstall).
     * preflight runs before anything else and while the extracted files are in the uploaded temp folder.
     * If preflight returns false, Joomla will abort the update and undo everything already done.
     *
     * @param   string         $type   Type of install
     * @param   JInstallerFile $parent Where it is coming from
     *
     * @return boolean
     */
    public function preflight($type, $parent)
    {
        // This component does not work with Joomla releases prior to 2.5
        // abort if the current Joomla release is older

        // Extract the version number from the manifest. This will overwrite the 1.0 value set above
        /** @noinspection PhpUndefinedMethodInspection */
        $this-&gt;_release = $parent-&gt;get("manifest")-&gt;version;

        // Start DB factory
        $db = JFactory::getDBO();

        // Set the #__schemas version_id to the correct number so the update will occur if out of sequence.
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('extension_id')
            -&gt;from('#__extensions')
            -&gt;where('name LIKE ' . $db-&gt;q('%com_biblestudy%'));
        $db-&gt;setQuery($query);
        $extensionid = $db-&gt;loadResult();

        if ($extensionid)
        {
            $query = $db-&gt;getQuery(true);
            $query-&gt;select('version_id')
                -&gt;from('#__schemas')
                -&gt;where('extension_id = ' . $db-&gt;quote($extensionid));
            $db-&gt;setQuery($query);
            $jbsversion = $db-&gt;loadResult();

            if ($jbsversion == '20100101')
            {
                $query = $db-&gt;getQuery(true);
                $query-&gt;update('#__schemas')
                    -&gt;set('version_id = ' . $db-&gt;q('7.0.0'))
                    -&gt;where('extension_id = ' . $db-&gt;quote($extensionid));
                $db-&gt;setQuery($query);
                $db-&gt;execute();
            }
        }

        if ($type == 'install')
        {
            // Copy the css file over to another location
            $src = JPATH_SITE . '/components/com_biblestudy/assets/css/biblestudy.css';

            if (JFile::exists($src))
            {
                JFile::copy($src, JPATH_SITE . '/tmp/biblestudy.css');
            }
        }
        $install_good = version_compare(PHP_VERSION, $this-&gt;_minimum_php, '&lt;');

        if (!$install_good)
        {
            $install_good = version_compare(JVERSION, $this-&gt;_minimum_joomla_release, 'ge');
        }
        else
        {
            JFactory::$application-&gt;enqueueMessage('Your host needs to use PHP ' . $this-&gt;_minimum_php . ' or higher to run Joomla Bible Study');
            $install_good = false;
        }

        // Only allow to install on minimum Joomla! version
        return $install_good;
    }

    /**
     * Install
     *
     * @param   JInstallerFile $parent Where call is coming from
     *
     * @return  void
     */
    public function install($parent)
    {
        $db     = JFactory::getDBO();
        $buffer = file_get_contents(JPATH_ADMINISTRATOR . '/components/com_biblestudy/install/sql/install-defaults.sql');

        if ($buffer === false)
        {
            die('No install-defaults.sql file');
        }

        // Create an array of queries from the sql file
        $queries = $db-&gt;splitSql($buffer);

        foreach ($queries as $querie)
        {
            $querie = trim($querie);

            if ($querie != '' &amp;&amp; $querie{0} != '#')
            {
                $db-&gt;setQuery($querie);
                $db-&gt;execute();
            }
        }
        require_once JPATH_ADMINISTRATOR . '/components/com_biblestudy/install/biblestudy.install.special.php';
        $fresh = new JBSMFreshInstall;

        if (!$fresh-&gt;installCSS())
        {
            JFactory::getApplication()-&gt;enqueueMessage(JText::_('JBS_INS_FAILURE'), 'error');
        }

    }

    /**
     * Uninstall
     *
     * @param   JInstallerFile $parent Where call is coming from
     *
     * @return   void
     */
    public function uninstall($parent)
    {
        $dbhelper    = new JBSMDbHelper;
        $drop_result = '';

        if ($dbhelper-&gt;checkIfTable('#__bsms_admin'))
        {
            $db    = JFactory::getDBO();
            $query = $db-&gt;getQuery(true);
            $query-&gt;select('*')
                -&gt;from('#__bsms_admin')
                -&gt;where('id = 1');
            $db-&gt;setQuery($query);
            $adminsettings = $db-&gt;loadObject();

            $drop_tables = $adminsettings-&gt;drop_tables;

            if ($drop_tables &gt; 0)
            {
                // We must remove the assets manually each time
                $db    = JFactory::getDBO();
                $query = $db-&gt;getQuery(true);
                $query-&gt;select('id')
                    -&gt;from('#__assets')
                    -&gt;where('name = ' . $db-&gt;q($this-&gt;biblestudy_extension));
                $db-&gt;setQuery($query);
                $parent_id = $db-&gt;loadResult();
                $query     = $db-&gt;getQuery(true);

                if ($parent_id != '0')
                {
                    $query-&gt;delete()
                        -&gt;from('#__assets')
                        -&gt;where('parent_id = ' . $db-&gt;q($parent_id))
                        -&gt;where('name != ' . $db-&gt;q('root.1'));
                    $db-&gt;setQuery($query);
                    $db-&gt;execute();
                }

                $query = $db-&gt;getQuery(true);
                $query-&gt;delete()
                    -&gt;from('#__assets')
                    -&gt;where('name LIKE ' . $db-&gt;q($this-&gt;biblestudy_extension))
                    -&gt;where('name != ' . $db-&gt;q('root.1'));
                $db-&gt;setQuery($query);
                $db-&gt;execute();
                $buffer = file_get_contents(JPATH_ADMINISTRATOR . '/components/com_biblestudy/install/sql/uninstall-dbtables.sql');

                // Graceful exit and rollback if read not successful
                if ($buffer === false)
                {
                    die('no uninstall-dbtables.sql');
                }
                $queries = $db-&gt;splitSql($buffer);

                foreach ($queries as $querie)
                {
                    $querie = trim($querie);

                    if ($querie != '' &amp;&amp; $querie{0} != '#' &amp;&amp; $querie != '`')
                    {
                        $db-&gt;setQuery($querie);
                        $db-&gt;execute();
                    }
                }
            }
        }
        else
        {
            $drop_result = '&lt;h3&gt;' . JText::_('JBS_INS_NO_DATABASE_REMOVED') . '&lt;/h3&gt;';
        }
        echo '&lt;h2&gt;' . JText::_('JBS_INS_UNINSTALLED') . ' ' . $this-&gt;_release . '&lt;/h2&gt; &lt;div&gt;' . $drop_result . '&lt;/div&gt;';
    }

    /**
     * Update
     *
     * @param   JInstallerFile $parent Where call is coming from
     *
     * @return   void
     */
    public function update($parent)
    {
        $this-&gt;fixMenus();
        $this-&gt;fixImagePaths();
        $this-&gt;fixemptyaccess();
        $this-&gt;fixemptylanguage();
        JLoader::register('JBSM800Update', JPATH_ADMINISTRATOR . '/components/com_biblestudy/install/updates/8.0.0.php');
        $update800 = new JBSM800Update;
        $update800-&gt;update800();
    }

    /**
     * Post Flight
     *
     * @param   string         $type   Type of install
     * @param   JInstallerFile $parent Where it is coming from
     *
     * @return   void
     */
    public function postflight($type, $parent)
    {
        // Set the #__schemas version_id to the correct number for error from 7.0.0
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('extension_id')
            -&gt;from('#__extensions')
            -&gt;where('name LIKE' . $db-&gt;q('%com_biblestudy%'));
        $db-&gt;setQuery($query);
        $extensionid = $db-&gt;loadResult();

        if ($extensionid)
        {
            $query = $db-&gt;getQuery(true);
            $query-&gt;select('version_id')
                -&gt;from('#__schemas')
                -&gt;where('extension_id = ' . $db-&gt;q($extensionid));
            $db-&gt;setQuery($query);
            $jbsversion = $db-&gt;loadResult();

            if ($jbsversion == '20100101')
            {
                $query = $db-&gt;getQuery(true);
                $query-&gt;update('#__schemas')
                    -&gt;set('version_id = ' . $db-&gt;q($this-&gt;_release))
                    -&gt;where('extension_id = ' . $db-&gt;q($extensionid));
                $db-&gt;setQuery($query);
                $db-&gt;execute();
            }
        }

        // Set initial values for component parameters
        $params['my_param0'] = 'Component version ' . $this-&gt;_release;
        $params['my_param1'] = 'Start';
        $params['my_param2'] = '1';
        $this-&gt;setParams($params);

        // Set install state
        $subquery = '{"release":"' . $this-&gt;_release . '","jbsparent":"' .
            $parent . '","jbstype":"' . $type . '","jbsname":"com_biblestudy"}';
        $query1   = $db-&gt;getQuery(true);
        $query1-&gt;update('#__bsms_admin')
            -&gt;set('installstate = ' . $db-&gt;q($subquery))
            -&gt;where('id = 1');
        $db-&gt;setQuery($query1);
        $db-&gt;execute();

        // An redirect to a new location after the install is completed.
        $parent-&gt;getParent()-&gt;set('redirect_url', JURI::base() . 'index.php?option=com_biblestudy');
    }

    /**
     * Get a variable from the manifest file (actually, from the manifest cache).
     *
     * @param   string $name Name of param
     *
     * @return string
     */
    public function getParam($name)
    {
        $db    = JFactory::getDbo();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('manifest_cache')
            -&gt;from('#_extensions')
            -&gt;where('name = ' . $db-&gt;q($this-&gt;biblestudy_extension));
        $db-&gt;setQuery($query);
        $manifest = json_decode($db-&gt;loadResult(), true);

        return $manifest[$name];
    }

    /**
     * sets parameter values in the component's row of the extension table
     *
     * @param   array $param_array Array of params to set.
     *
     * @return   void
     */
    public function setParams($param_array)
    {
        if (count($param_array) &gt; 0)
        {
            // Read the existing component value(s)
            $db    = JFactory::getDbo();
            $query = $db-&gt;getQuery(true);
            $query-&gt;select('params')
                -&gt;from('#__extensions')
                -&gt;where('name = ' . $db-&gt;q($this-&gt;biblestudy_extension));
            $db-&gt;setQuery($query);
            $params = json_decode($db-&gt;loadResult(), true);

            // Add the new variable(s) to the existing one(s)
            foreach ($param_array as $name =&gt; $value)
            {
                $params[(string) $name] = (string) $value;
            }

            // Store the combined new and existing values back as a JSON string
            $paramsString = json_encode($params);
            $query        = $db-&gt;getQuery(true);
            $query-&gt;update('#__extensions')
                -&gt;set('params = ' . $db-&gt;q($paramsString))
                -&gt;where('name = ' . $db-&gt;q($this-&gt;biblestudy_extension));
            $db-&gt;setQuery($query);
            $db-&gt;execute();
        }
    }

    /**
     * Remove Old Files and Folders
     *
     * @since 7.1.0
     *
     * @return   void
     */
    public function deleteUnexistingFiles()
    {
        $files = array(
            '/media/com_biblestudy/css/biblestudy.css.dist',
            '/images/textfile24.png',
            '/components/com_biblestudy/biblestudy.css',
            '/components/com_biblestudy/class.biblestudydownload.php',
            '/components/language/en-GB/en-GB.com_biblestudy.ini',
            '/administrator/language/en-GB/en-GB.com_biblestudy.ini',
            '/administrator/language/en-GB/en-GB.com_biblestudy.sys.ini',
            '/administrator/components/com_biblestudy/Snoopy.class.php',
            '/administrator/components/com_biblestudy/admin.biblestudy.php',
            '/components/com_biblestudy/helpers/updatesef.php',
            '/components/com_biblestudy/helpers/image.php',
            '/components/com_biblestudy/helpers/helper.php',
            '/components/com_biblestudy/views/messages/tmpl/modal16.php',
            '/components/com_biblestudy/controllers/teacherlist.php',
            '/components/com_biblestudy/controllers/teacherdisplay.php',
            '/components/com_biblestudy/controllers/studydetails.php',
            '/components/com_biblestudy/controllers/studieslist.php',
            '/components/com_biblestudy/controllers/serieslist.php',
            '/components/com_biblestudy/controllers/seriesdetail.php',
            '/components/com_biblestudy/models/teacherlist.php',
            '/components/com_biblestudy/models/teacherdisplay.php',
            '/components/com_biblestudy/models/studydetails.php',
            '/components/com_biblestudy/models/studieslist.php',
            '/components/com_biblestudy/models/seriesdetail.php',
            '/components/com_biblestudy/models/serieslist.php',
            '/components/com_biblestudy/views/mediafile/tmpl/form.php',
            '/components/com_biblestudy/views/mediafile/tmpl/form.xml',
            '/language/en-GB/en-GB.com_biblestudy.ini',
            '/language/cs-CZ/cs-CZ.com_biblestudy.ini',
            '/language/de-DE/de-DE.com_biblestudy.ini',
            '/language/es-ES/es-ES.com_biblestudy.ini',
            '/language/hu-HU/hu-HU.com_biblestudy.ini',
            '/language/nl-NL/nl-NL.com_biblestudy.ini',
            '/language/no-NO/no-NO.com_biblestudy.ini',
            '/language/en-GB/en-GB.mod_biblestudy.ini',
            '/language/en-GB/en-GB.mod_biblestudy.sys.ini',
            '/administrator/components/com_biblestudy/install/biblestudy.assets.php',
            '/administrator/components/com_biblestudy/install/sql/jbs7.0.0.sql',
            '/administrator/components/com_biblestudy/install/sql/updates/mysql/20100101.sql',
            '/administrator/components/com_biblestudy/lib/biblestudy.podcast.class.php',
            '/administrator/components/com_biblestudy/controllers/commentsedit.php',
            '/administrator/components/com_biblestudy/controllers/commentslist.php',
            '/administrator/components/com_biblestudy/controllers/cssedit.php',
            '/administrator/components/com_biblestudy/controllers/folderslist.php',
            '/administrator/components/com_biblestudy/controllers/foldersedit.php',
            '/administrator/components/com_biblestudy/controllers/locationslist.php',
            '/administrator/components/com_biblestudy/controllers/locationsedit.php',
            '/administrator/components/com_biblestudy/controllers/mediaedit.php',
            '/administrator/components/com_biblestudy/controllers/mediafilesedit.php',
            '/administrator/components/com_biblestudy/controllers/mediafileslist.php',
            '/administrator/components/com_biblestudy/controllers/medialist.php',
            '/administrator/components/com_biblestudy/controllers/messagetypelist.php',
            '/administrator/components/com_biblestudy/controllers/messagetypeedit.php',
            '/administrator/components/com_biblestudy/controllers/mimetypelist.php',
            '/administrator/components/com_biblestudy/controllers/mimetypeedit.php',
            '/administrator/components/com_biblestudy/controllers/podcastlist.php',
            '/administrator/components/com_biblestudy/controllers/podcastedit.php',
            '/administrator/components/com_biblestudy/controllers/serieslist.php',
            '/administrator/components/com_biblestudy/controllers/seriesedit.php',
            '/administrator/components/com_biblestudy/controllers/serverslist.php',
            '/administrator/components/com_biblestudy/controllers/serversedit.php',
            '/administrator/components/com_biblestudy/controllers/sharelist.php',
            '/administrator/components/com_biblestudy/controllers/shareedit.php',
            '/administrator/components/com_biblestudy/controllers/studieslist.php',
            '/administrator/components/com_biblestudy/controllers/studiesedit.php',
            '/administrator/components/com_biblestudy/controllers/teacherlist.php',
            '/administrator/components/com_biblestudy/controllers/teacheredit.php',
            '/administrator/components/com_biblestudy/controllers/templateedit.php',
            '/administrator/components/com_biblestudy/controllers/templateslist.php',
            '/administrator/components/com_biblestudy/controllers/topicslist.php',
            '/administrator/components/com_biblestudy/controllers/topicsedit.php',
            '/administrator/components/com_biblestudy/models/forms/commentsedit.xml',
            '/administrator/components/com_biblestudy/models/forms/foldersedit.xml',
            '/administrator/components/com_biblestudy/models/forms/locationsedit.xml',
            '/administrator/components/com_biblestudy/models/forms/mediaedit.xml',
            '/administrator/components/com_biblestudy/models/forms/mediafilesedit.xml',
            '/administrator/components/com_biblestudy/models/forms/messagetypeedit.xml',
            '/administrator/components/com_biblestudy/models/forms/mimetypeedit.xml',
            '/administrator/components/com_biblestudy/models/forms/podcastedit.xml',
            '/administrator/components/com_biblestudy/models/forms/seriesedit.xml',
            '/administrator/components/com_biblestudy/models/forms/serversedit.xml',
            '/administrator/components/com_biblestudy/models/forms/shareedit.xml',
            '/administrator/components/com_biblestudy/models/forms/studiesedit.xml',
            '/administrator/components/com_biblestudy/models/forms/teacheredit.xml',
            '/administrator/components/com_biblestudy/models/forms/templateedit.xml',
            '/administrator/components/com_biblestudy/models/forms/topicsedit.xml',
            '/administrator/components/com_biblestudy/models/episodelist.php',
            '/administrator/components/com_biblestudy/models/commentsedit.php',
            '/administrator/components/com_biblestudy/models/commentslist.php',
            '/administrator/components/com_biblestudy/models/cssedit.php',
            '/administrator/components/com_biblestudy/models/folderslist.php',
            '/administrator/components/com_biblestudy/models/foldersedit.php',
            '/administrator/components/com_biblestudy/models/locationslist.php',
            '/administrator/components/com_biblestudy/models/locationsedit.php',
            '/administrator/components/com_biblestudy/models/mediaedit.php',
            '/administrator/components/com_biblestudy/models/mediafilesedit.php',
            '/administrator/components/com_biblestudy/models/mediafileslist.php',
            '/administrator/components/com_biblestudy/models/medialist.php',
            '/administrator/components/com_biblestudy/models/messagetypelist.php',
            '/administrator/components/com_biblestudy/models/messagetypeedit.php',
            '/administrator/components/com_biblestudy/models/mimetypelist.php',
            '/administrator/components/com_biblestudy/models/mimetypeedit.php',
            '/administrator/components/com_biblestudy/models/podcastlist.php',
            '/administrator/components/com_biblestudy/models/podcastedit.php',
            '/administrator/components/com_biblestudy/models/serieslist.php',
            '/administrator/components/com_biblestudy/models/seriesedit.php',
            '/administrator/components/com_biblestudy/models/serverslist.php',
            '/administrator/components/com_biblestudy/models/serversedit.php',
            '/administrator/components/com_biblestudy/models/sharelist.php',
            '/administrator/components/com_biblestudy/models/shareedit.php',
            '/administrator/components/com_biblestudy/models/studieslist.php',
            '/administrator/components/com_biblestudy/models/studiesedit.php',
            '/administrator/components/com_biblestudy/models/teacherlist.php',
            '/administrator/components/com_biblestudy/models/teacheredit.php',
            '/administrator/components/com_biblestudy/models/templateedit.php',
            '/administrator/components/com_biblestudy/models/templateslist.php',
            '/administrator/components/com_biblestudy/models/topicslist.php',
            '/administrator/components/com_biblestudy/models/topicsedit.php',
            '/administrator/components/com_biblestudy/tables/biblestudy.php',
            '/administrator/components/com_biblestudy/tables/booksedit.php',
            '/administrator/components/com_biblestudy/tables/commentsedit.php',
            '/administrator/components/com_biblestudy/tables/foldersedit.php',
            '/administrator/components/com_biblestudy/tables/locationsedit.php',
            '/administrator/components/com_biblestudy/tables/mediaedit.php',
            '/administrator/components/com_biblestudy/tables/mediafilesedit.php',
            '/administrator/components/com_biblestudy/tables/messagetypeedit.php',
            '/administrator/components/com_biblestudy/tables/mimetypeedit.php',
            '/administrator/components/com_biblestudy/tables/podcastedit.php',
            '/administrator/components/com_biblestudy/tables/seriesedit.php',
            '/administrator/components/com_biblestudy/tables/serversedit.php',
            '/administrator/components/com_biblestudy/tables/shareedit.php',
            '/administrator/components/com_biblestudy/tables/studiesedit.php',
            '/administrator/components/com_biblestudy/tables/teacheredit.php',
            '/administrator/components/com_biblestudy/tables/topicsedit.php',
            '/administrator/components/com_biblestudy/tables/templateedit.php',
            '/administrator/components/com_biblestudy/helpers/version.php',
            '/administrator/language/en-GB/en-GB.com_biblestudy.ini',
            '/administrator/language/en-GB/en-GB.com_biblestudy.sys.ini',
            '/administrator/language/cs-CZ/cs-CZ.com_biblestudy.ini',
            '/administrator/language/cs-CZ/cs-CZ.com_biblestudy.sys.ini',
            '/administrator/language/de-DE/de-DE.com_biblestudy.ini',
            '/administrator/language/de-DE/de-DE.com_biblestudy.sys.ini',
            '/administrator/language/es-ES/es-ES.com_biblestudy.ini',
            '/administrator/language/es-ES/es-ES.com_biblestudy.sys.ini',
            '/administrator/language/hu-HU/hu-HU.com_biblestudy.ini',
            '/administrator/language/hu-HU/hu-HU.com_biblestudy.sys.ini',
            '/administrator/language/nl-NL/nl-NL.com_biblestudy.ini',
            '/administrator/language/nl-NL/no-NO.com_biblestudy.ini',
            '/administrator/language/no-NO/no-NO.com_biblestudy.sys.ini',
            // JBSM 8.0.0
            // Site:
            '/components/com_biblestudy/controllers\commentsedit.php',
            '/components/com_biblestudy/controllers\commentslist.php',
            '/components/com_biblestudy/controllers\mediafile.php',
            '/components/com_biblestudy/controllers\mediafiles.php',
            '/components/com_biblestudy/controllers\message.php',
            '/components/com_biblestudy/controllers\messages.php',
            '/components/com_biblestudy/helpers\book.php',
            '/components/com_biblestudy/helpers\date.php',
            '/components/com_biblestudy/helpers\duration.php',
            '/components/com_biblestudy/helpers\editlink.php',
            '/components/com_biblestudy/helpers\editlisting.php',
            '/components/com_biblestudy/helpers\filepath.php',
            '/components/com_biblestudy/helpers\filesize.php',
            '/components/com_biblestudy/helpers\header.php',
            '/components/com_biblestudy/helpers\listing.php',
            '/components/com_biblestudy/helpers\location.php',
            '/components/com_biblestudy/helpers\mediatable.php',
            '/components/com_biblestudy/helpers\messagetype.php',
            '/components/com_biblestudy/helpers\params.php',
            '/components/com_biblestudy/helpers\passage.php',
            '/components/com_biblestudy/helpers\scripture.php',
            '/components/com_biblestudy/helpers\share.php',
            '/components/com_biblestudy/helpers\store.php',
            '/components/com_biblestudy/helpers\textlink.php',
            '/components/com_biblestudy/helpers\title.php',
            '/components/com_biblestudy/helpers\toolbar.php',
            '/components/com_biblestudy/helpers\topics.php',
            '/components/com_biblestudy/helpers\year.php',
            '/components/com_biblestudy/lib\biblestudy.admin.class.php',
            '/components/com_biblestudy/lib\biblestudy.defines.php',
            '/components/com_biblestudy/lib\biblestudy.stats.class.php',
            '/components/com_biblestudy/models\forms\commentsedit.xml',
            '/components/com_biblestudy/models\commentsedit.php',
            '/components/com_biblestudy/models\commentslist.php',
            '/components/com_biblestudy/models\mediafile.php',
            '/components/com_biblestudy/models\mediafiles.php',
            '/components/com_biblestudy/models\message.php',
            '/components/com_biblestudy/models\messages.php',
            // Admin:
            '/administrator/components/com_biblestudy/controllers\ajax.php',
            '/administrator/components/com_biblestudy/helpers\cleanurl.php',
            '/administrator/components/com_biblestudy/helpers\toolbar.php',
            '/administrator/components/com_biblestudy/lib\biblestudy.admin.class.php',
            '/administrator/components/com_biblestudy/lib\biblestudy.migrate.php',
            '/administrator/components/com_biblestudy/migration\biblestudy.611.upgrade.php',
            '/administrator/components/com_biblestudy/migration\biblestudy.612.upgrade.php',
            '/administrator/components/com_biblestudy/migration\biblestudy.613.upgrade.php',
            '/administrator/components/com_biblestudy/migration\biblestudy.614.upgrade.php',
            '/administrator/components/com_biblestudy/migration\biblestudy.622.upgrade.php',
            '/administrator/components/com_biblestudy/migration\biblestudy.623.upgrade.php',
            '/administrator/components/com_biblestudy/migration\biblestudy.700.upgrade.php',
            '/administrator/components/com_biblestudy/migration\update701.php',
            '/administrator/components/com_biblestudy/models\fields\locationordering.php',
            '/administrator/components/com_biblestudy/models\fields\mediaordering.php',
            '/administrator/components/com_biblestudy/models\fields\messagetypeordering.php',
            '/administrator/components/com_biblestudy/models\fields\shareordering.php',
            '/administrator/components/com_biblestudy/models\fields\teacherordering.php',
            '/administrator/components/com_biblestudy/views\admin\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\admin\tmpl\form_assets.php',
            '/administrator/components/com_biblestudy/views\admin\tmpl\form_backup.php',
            '/administrator/components/com_biblestudy/views\admin\tmpl\form_database.php',
            '/administrator/components/com_biblestudy/views\admin\tmpl\form_migrate.php',
            '/administrator/components/com_biblestudy/views\comment\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\folder\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\folders\tmpl\index.html',
            '/administrator/components/com_biblestudy/views\location\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\mediaimage\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\message\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\messagetype\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\mimetype\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\podcast\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\serie\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\server\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\server\tmpl\index.html',
            '/administrator/components/com_biblestudy/views\share\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\teacher\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\template\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\templatecode\tmpl\form.php',
            '/administrator/components/com_biblestudy/views\topic\tmpl\form.php',
        );

        $folders = array(
            '/components/com_biblestudy/assets',
            '/components/com_biblestudy/images',
            '/components/com_biblestudy/views/teacherlist',
            '/components/com_biblestudy/views/teacherdisplay',
            '/components/com_biblestudy/views/studieslist',
            '/components/com_biblestudy/views/studydetails',
            '/components/com_biblestudy/views/serieslist',
            '/components/com_biblestudy/views/seriesdetail',
            '/administrator/media',
            '/administrator/components/com_biblestudy/assets',
            '/administrator/components/com_biblestudy/images',
            '/administrator/components/com_biblestudy/css',
            '/administrator/components/com_biblestudy/js',
            '/administrator/components/com_biblestudy/views/commentsedit',
            '/administrator/components/com_biblestudy/views/commentslist',
            '/administrator/components/com_biblestudy/views/cssedit',
            '/administrator/components/com_biblestudy/views/folderslist',
            '/administrator/components/com_biblestudy/views/foldersedit',
            '/administrator/components/com_biblestudy/views/locationslist',
            '/administrator/components/com_biblestudy/views/locationsedit',
            '/administrator/components/com_biblestudy/views/mediaedit',
            '/administrator/components/com_biblestudy/views/mediafilesedit',
            '/administrator/components/com_biblestudy/views/mediafileslist',
            '/administrator/components/com_biblestudy/views/medialist',
            '/administrator/components/com_biblestudy/views/messagetypelist',
            '/administrator/components/com_biblestudy/views/messagetypeedit',
            '/administrator/components/com_biblestudy/views/mimetypelist',
            '/administrator/components/com_biblestudy/views/mimetypeedit',
            '/administrator/components/com_biblestudy/views/podcastlist',
            '/administrator/components/com_biblestudy/views/podcastedit',
            '/administrator/components/com_biblestudy/views/serieslist',
            '/administrator/components/com_biblestudy/views/seriesedit',
            '/administrator/components/com_biblestudy/views/serverslist',
            '/administrator/components/com_biblestudy/views/serversedit',
            '/administrator/components/com_biblestudy/views/sharelist',
            '/administrator/components/com_biblestudy/views/shareedit',
            '/administrator/components/com_biblestudy/views/studieslist',
            '/administrator/components/com_biblestudy/views/studiesedit',
            '/administrator/components/com_biblestudy/views/teacherlist',
            '/administrator/components/com_biblestudy/views/teacheredit',
            '/administrator/components/com_biblestudy/views/templateedit',
            '/administrator/components/com_biblestudy/views/templateslist',
            '/administrator/components/com_biblestudy/views/topicslist',
            '/administrator/components/com_biblestudy/views/topicsedit',
            // JBSM 8.0.0
            '/components/com_biblestudy/views/messages',
            '/components/com_biblestudy/views/message',
            '/components/com_biblestudy/views/mediafiles',
            '/components/com_biblestudy/views/mediafile',
            '/components/com_biblestudy/views/commentslist',
            '/components/com_biblestudy/views/commentsedit',
        );

        foreach ($files as $file)
        {
            if (JFile::exists(JPATH_ROOT . $file) &amp;&amp; !JFile::delete(JPATH_ROOT . $file))
            {
                echo JText::sprintf('FILES_JOOMLA_ERROR_FILE_FOLDER', $file) . '&lt;br /&gt;';
            }
        }

        foreach ($folders as $folder)
        {
            if (JFolder::exists(JPATH_ROOT . $folder) &amp;&amp; !JFolder::delete(JPATH_ROOT . $folder))
            {
                echo JText::sprintf('FILES_JOOMLA_ERROR_FILE_FOLDER', $folder) . '&lt;br /&gt;';
            }
        }
    }

    /**
     * Fix Menus
     *
     * @since 7.1.0
     *
     * @return   void
     */
    public function fixMenus()
    {
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('*')
            -&gt;from('#__menu')
            -&gt;where($db-&gt;qn('menutype') . ' != ' . $db-&gt;q('main'))
            -&gt;where($db-&gt;qn('link') . ' LIKE ' . $db-&gt;q('%com_biblestudy%'));
        $db-&gt;setQuery($query);
        $menus = $db-&gt;loadObjectList();

        foreach ($menus AS $menu)
        {
            $menu-&gt;link = str_replace('teacherlist', 'teachers', $menu-&gt;link);
            $menu-&gt;link = str_replace('teacherdisplay', 'teacher', $menu-&gt;link);
            $menu-&gt;link = str_replace('studydetails', 'sermon', $menu-&gt;link);
            $menu-&gt;link = str_replace('serieslist', 'seriesdisplays', $menu-&gt;link);
            $menu-&gt;link = str_replace('seriesdetail', 'seriesdisplay', $menu-&gt;link);
            $menu-&gt;link = str_replace('studieslist', 'sermons', $menu-&gt;link);
            $query      = $db-&gt;getQuery(true);
            $query-&gt;update('#__menu')
                -&gt;set("link = " . $db-&gt;q($menu-&gt;link))
                -&gt;where('id = ' . $db-&gt;q($menu-&gt;id));
            $db-&gt;setQuery($query);
            $db-&gt;execute();
        }
    }

    /**
     * Fix Image paths
     *
     * @since 7.1.0
     *
     * @return   void
     */
    public function fixImagePaths()
    {
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('*')
            -&gt;from('#__bsms_media');
        $db-&gt;setQuery($query);
        $images = $db-&gt;loadObjectList();

        foreach ($images as $image)
        {
            if (!empty($image-&gt;media_image_path))
            {
                $image-&gt;media_image_path = str_replace('components', 'media', $image-&gt;media_image_path);
                $query                   = $db-&gt;getQuery(true);
                $query-&gt;update('#__bsms_media')
                    -&gt;set("media_image_path = " . $db-&gt;q($image-&gt;media_image_path))
                    -&gt;where('id = ' . $db-&gt;q($image-&gt;id));
                $db-&gt;setQuery($query);
                $db-&gt;execute();
            }
        }
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('*')
            -&gt;from('#__bsms_share');
        $db-&gt;setQuery($query);
        $datas = $db-&gt;loadObjectList();

        foreach ($datas as $data)
        {
            // Need to adjust the params and write back
            $registry = new Registry;
            $registry-&gt;loadString($data-&gt;params);
            $params     = $registry;
            $shareimage = $params-&gt;get('shareimage');
            $shareimage = str_replace('components', 'media', $shareimage);
            $params-&gt;set('shareimage', $shareimage);

            // Now write the params back into the $table array and store.
            $data-&gt;params = (string) $params-&gt;toString();
            $qeery        = $db-&gt;getQuery(true);
            $qeery-&gt;update('#__bsms_share')
                -&gt;set('params =' . $db-&gt;q($data-&gt;params))
                -&gt;where('id = ' . $db-&gt;q($data-&gt;id));
            $db-&gt;setQuery($query);
            $db-&gt;execute();
        }
    }

    /**
     * Function to find empty language field and set them to "*"
     *
     * @since 7.1.0
     *
     * @return   void
     */
    public function fixemptylanguage()
    {
        // Tables to fix
        $tables = array(
            array('table' =&gt; '#__bsms_comments'),
            array('table' =&gt; '#__bsms_mediafiles'),
            array('table' =&gt; '#__bsms_series'),
            array('table' =&gt; '#__bsms_studies'),
            array('table' =&gt; '#__bsms_teachers'),
        );

        // Correct blank records
        foreach ($tables as $table)
        {
            $db    = JFactory::getDBO();
            $query = $db-&gt;getQuery(true);
            $query-&gt;update($table['table'])
                -&gt;set('language = ' . $db-&gt;q('*'))
                -&gt;where('language = ' . $db-&gt;q(''));
            $db-&gt;setQuery($query);
            $db-&gt;execute();
        }
    }

    /**
     * Function to Find empty access in the db and set them to Public
     *
     * @since 7.1.0
     *
     * @return   void
     */
    public function fixemptyaccess()
    {
        // Tables to fix
        $tables = array(
            array('table' =&gt; '#__bsms_admin'),
            array('table' =&gt; '#__bsms_mediafiles'),
            array('table' =&gt; '#__bsms_message_type'),
            array('table' =&gt; '#__bsms_mimetype'),
            array('table' =&gt; '#__bsms_podcast'),
            array('table' =&gt; '#__bsms_series'),
            array('table' =&gt; '#__bsms_servers'),
            array('table' =&gt; '#__bsms_share'),
            array('table' =&gt; '#__bsms_studies'),
            array('table' =&gt; '#__bsms_studytopics'),
            array('table' =&gt; '#__bsms_teachers'),
            array('table' =&gt; '#__bsms_templates'),
            array('table' =&gt; '#__bsms_topics'),
        );

        // Get Public id
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('id')
            -&gt;from('#__viewlevels')
            -&gt;where('title = ' . $db-&gt;q('Public'));
        $db-&gt;setQuery($query);
        $id = $db-&gt;loadResult();

        // Correct blank or not set records
        foreach ($tables as $table)
        {
            $query = $db-&gt;getQuery(true);
            $query-&gt;update($table['table'])
                -&gt;set('access = ' . $id)
                -&gt;where("(access = " . $db-&gt;q('0') . " or access = " . $db-&gt;q('') . ")");
            $db-&gt;setQuery($query);
            $db-&gt;execute();
        }
    }

    public function rmoldurl()
    {

        $urls = array("http://www.joomlabiblestudy.org/index.php?option=com_ars&amp;view=update&amp;task=stream&amp;format=xml&amp;id=3&amp;dummy=extension.xml /extension.xml",
            "http://www.joomlabiblestudy.org/index.php?option=com_ars&amp;view=update&amp;task=stream&amp;format=xml&amp;id=14&amp;dummy=extension.xml /extension.xml, ",
            "http://www.joomlabiblestudy.org/index.php?option=com_ars&amp;view=update&amp;task=stream&amp;format=xml&amp;id=13&amp;dummy=extension.xml /extension.xml, ",
            "http://www.joomlabiblestudy.org/index.php?option=com_ars&amp;view=update&amp;task=stream&amp;format=xml&amp;id=4&amp;dummy=extension.xml /extension.xml, ",
            "http://www.joomlabiblestudy.org/index.php?option=com_ars&amp;view=update&amp;task=stream&amp;format=xml&amp;id=8&amp;dummy=extension.xml /extension.xml ",
            "http://www.joomlabiblestudy.org/index.php?option=com_ars&amp;view=update&amp;task=stream&amp;format=xml&amp;id=5&amp;dummy=extension.xml /extension.xml");

        return $urls;
</codefragment>
  </duplication>
  <duplication lines="6" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/servers.php" line="35"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/commentlist.php" line="39"/>
    <codefragment>    public function getModel($name = 'Server', $prefix = 'BiblestudyModel', $config = array('ignore_request' =&gt; true))
    {
        $model = parent::getModel($name, $prefix, $config);

        return $model;
    }
</codefragment>
  </duplication>
  <duplication lines="13" tokens="19">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/commentform.php" line="196"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/mediafileform.php" line="183"/>
    <codefragment>        $append = '';

        // Setup redirect info.
        if ($tmpl)
        {
            $append .= '&amp;tmpl=' . $tmpl;
        }

        $append .= '&amp;layout=edit';

        if ($recordId)
        {
            $append .= '&amp;' . $urlVar . '=' . $recordId;
</codefragment>
  </duplication>
  <duplication lines="6" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/controllers/servers.php" line="35"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/mediafilelist.php" line="38"/>
    <codefragment>    public function getModel($name = 'Server', $prefix = 'BiblestudyModel', $config = array('ignore_request' =&gt; true))
    {
        $model = parent::getModel($name, $prefix, $config);

        return $model;
    }
</codefragment>
  </duplication>
  <duplication lines="8" tokens="22">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/mediafilelist.php" line="36"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/messagelist.php" line="37"/>
    <codefragment>    public function &amp;getModel(
        $name = 'Mediafileform',
        $prefix = 'BiblestudyModel',
        $config = array('ignore_request' =&gt; true))
    {
        $model = parent::getModel($name, $prefix, $config);

        return $model;
</codefragment>
  </duplication>
  <duplication lines="37" tokens="60">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/mediafileform.php" line="159"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/sermon.php" line="142"/>
    <codefragment>        $config = array('ignore_request' =&gt; true))
    {
        $model = parent::getModel($name, $prefix, $config);

        return $model;
    }

    /**
     * Gets the URL arguments to append to an item redirect.
     *
     * @param   int    $recordId  The primary key id for the item.
     * @param   string $urlVar    The name of the URL variable for the id.
     *
     * @return    string    The arguments to append to the redirect URL.
     *
     * @since    1.6
     */
    protected function getRedirectToItemAppend($recordId = null, $urlVar = 'a_id')
    {
        $this-&gt;input = new JInput;

        // Need to override the parent method completely.
        $tmpl   = $this-&gt;input-&gt;get('tmpl');
        $layout = $this-&gt;input-&gt;get('layout', 'edit');
        $append = '';

        // Setup redirect info.
        if ($tmpl)
        {
            $append .= '&amp;tmpl=' . $tmpl;
        }

        $append .= '&amp;layout=edit';

        if ($recordId)
        {
            $append .= '&amp;' . $urlVar . '=' . $recordId;
</codefragment>
  </duplication>
  <duplication lines="9" tokens="38">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controller.php" line="250"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/sermon.php" line="421"/>
    <codefragment>        $query-&gt;select('id, studytitle, studydate')-&gt;from('#__bsms_studies')-&gt;where('id = ' . $comment_study_id);
        $db-&gt;setQuery($query);
        $comment_details    = $db-&gt;loadObject();
        $comment_title      = $comment_details-&gt;studytitle;
        $comment_study_date = $comment_details-&gt;studydate;
        $mail               = JFactory::getMailer();
        $ToEmail            = $params-&gt;get('recipient', '');
        $Subject            = $params-&gt;get('subject', 'Comments');
        $FromName           = $params-&gt;get('fromname', $comment_fromname);
</codefragment>
  </duplication>
  <duplication lines="28" tokens="32">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/seriesdisplays.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/controllers/teachers.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;
jimport('joomla.application.component.controller');

/**
 * Controller for Teachers
 *
 * @package  BibleStudy.Site
 * @since    7.0.0
 */
class BiblestudyControllerTeachers extends JControllerLegacy
{

    /**
     * Proxy for getModel
     *
     * @param   string $name    The name of the model
     * @param   string $prefix  The prefix for the PHP class name
     * @param   array  $config  Set ignore request
     *
     * @return JModel
     *
     * @since 7.0
     */
    public function &amp;getModel($name = 'Teacher', $prefix = 'BiblestudyModel', $config = array('ignore_request' =&gt; true))
    {
        $model = parent::getModel($name, $prefix, $config);

        return $model;
</codefragment>
  </duplication>
  <duplication lines="10" tokens="22">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/book.php" line="25"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/landing.php" line="1270"/>
    <codefragment>    $book = null;&#13;
    $template = $params-&gt;get('studieslisttemplateid');&#13;
    $limit = $params-&gt;get('landingbookslimit');&#13;
    if (!$limit) {&#13;
        $limit = 10000;&#13;
    }&#13;
    $app = JFactory::getApplication();&#13;
    $menu = $app-&gt;getMenu();&#13;
    $item = $menu-&gt;getActive();&#13;
    $registry = new Registry;&#13;
</codefragment>
  </duplication>
  <duplication lines="18" tokens="42">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/book.php" line="99"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/landing.php" line="1364"/>
    <codefragment>                    $i = 0;&#13;
                    $showdiv = 1;&#13;
                }&#13;
            }&#13;
            $book .= "\n\t\t" . '&lt;td class="landing_td"&gt;';&#13;
            $book .= '&lt;a href="index.php?option=com_biblestudy&amp;amp;view=sermons&amp;amp;filter_book=' . $b-&gt;booknumber . '&amp;amp;filter_teacher=0&amp;amp;filter_series=0&amp;amp;filter_topic=0&amp;amp;filter_location=0&amp;amp;filter_year=0&amp;amp;filter_messagetype=0&amp;amp;t=' . $template . '"&gt;';&#13;
&#13;
            $book .= JText::sprintf($b-&gt;bookname);&#13;
&#13;
            $book .='&lt;/a&gt;';&#13;
&#13;
            $book .= '&lt;/td&gt;';&#13;
            $i++;&#13;
            $t++;&#13;
            if ($i == 3 &amp;&amp; $t != $limit &amp;&amp; $t != $count) {&#13;
                $book .= "\n\t" . '&lt;/tr&gt;&lt;tr&gt;';&#13;
                $i = 0;&#13;
            } elseif ($i == 3 || $t == $count || $t == $limit) {&#13;
</codefragment>
  </duplication>
  <duplication lines="9" tokens="27">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/landing.php" line="38"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/location.php" line="28"/>
    <codefragment>        $location  = null;
        $teacherid = null;
        $template  = $params-&gt;get('studieslisttemplateid', 1);
        $limit     = $params-&gt;get('landinglocationslimit');

        if (!$limit)
        {
            $limit = 10000;
        }
</codefragment>
  </duplication>
  <duplication lines="21" tokens="64">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/landing.php" line="141"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/location.php" line="110"/>
    <codefragment>                                $i       = 0;
                                $showdiv = 1;
                            }
                        }
                        if ($i == 0)
                        {
                            $location .= "\n\t" . '&lt;tr&gt;';
                        }
                        $location .= "\n\t\t" . '&lt;td class="landing_td"&gt;';
                        $location .= '&lt;a href="index.php?option=com_biblestudy&amp;amp;view=sermons&amp;amp;filter_location='
                            . $b-&gt;id . '&amp;amp;filter_teacher=0&amp;amp;filter_series=0&amp;amp;filter_topic=0&amp;amp;filter_book=0&amp;amp;filter_year=0&amp;amp;filter_messagetype=0&amp;amp;t='
                            . $template . '"&gt;';

                        $location .= $b-&gt;location_text;

                        $location .= '&lt;/a&gt;';

                        $location .= '&lt;/td&gt;';
                        $i++;
                        $t++;

</codefragment>
  </duplication>
  <duplication lines="9" tokens="27">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/landing.php" line="1058"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/messagetype.php" line="29"/>
    <codefragment>        $messagetype = null;
        $teacherid   = null;
        $template    = $params-&gt;get('studieslisttemplateid', 1);
        $limit       = $params-&gt;get('landingmessagetypeslimit');

        if (!$limit)
        {
            $limit = 10000;
        }
</codefragment>
  </duplication>
  <duplication lines="20" tokens="56">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/landing.php" line="1157"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/messagetype.php" line="106"/>
    <codefragment>                                $i       = 0;
                                $showdiv = 1;
                            }
                        }
                        $messagetype .= "\n\t\t" . '&lt;td class="landing_td"&gt;';

                        $messagetype .= '&lt;a href="index.php?option=com_biblestudy&amp;amp;view=sermons&amp;amp;filter_messagetype=' . $b-&gt;id
                            . '&amp;amp;filter_book=0&amp;amp;filter_teacher=0&amp;amp;filter_series=0&amp;amp;filter_topic=0&amp;amp;filter_location=0&amp;amp;filter_year=0&amp;amp;t='
                            . $template . '"&gt;';

                        $messagetype .= $b-&gt;message_type;

                        $messagetype .= '&lt;/a&gt;';

                        $messagetype .= '&lt;/td&gt;';

                        $i++;
                        $t++;

                        if ($i == 3 &amp;&amp; $t != $limit &amp;&amp; $t != $count)
</codefragment>
  </duplication>
  <duplication lines="8" tokens="22">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/elements.php" line="480"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/scripture.php" line="81"/>
    <codefragment>            if ($ch_e == $ch_b)
            {
                $ch_e = '';
                $b2a  = '';
            }
            if ($ch_e == $ch_b &amp;&amp; $v_b == $v_e)
            {
                $b3   = '';
</codefragment>
  </duplication>
  <duplication lines="17" tokens="64">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/elements.php" line="1139"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/store.php" line="40"/>
    <codefragment>        if (($cd-&gt;mid + $dvd-&gt;mid) &gt; 0)
        {
            if ($cd-&gt;mid &gt; 0)
            {
                $src = JURI::base() . $cd-&gt;media_image_path;

                if ($imagew)
                {
                    $width = $imagew;
                }
                else
                {
                    $width = 24;
                }

                if ($imageh)
                {
</codefragment>
  </duplication>
  <duplication lines="6" tokens="30">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/elements.php" line="808"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/textlink.php" line="35"/>
    <codefragment>        if (!$template-&gt;text || !substr_count($template-&gt;text, '/'))
        {
            $i_path    = 'media/com_biblestudy/images/textfile24.png';
            $textimage = $images-&gt;getImagePath($i_path);
            $src       = JURI::base() . $textimage-&gt;path;
            $height    = $textimage-&gt;height;
</codefragment>
  </duplication>
  <duplication lines="8" tokens="18">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/title.php" line="28"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/title.php" line="64"/>
    <codefragment>            case 0:&#13;
                $title .= null;&#13;
                break;&#13;
            case 1:&#13;
                $title .= $row-&gt;studytitle;&#13;
                break;&#13;
            case 2:&#13;
                $title .= $row-&gt;teachername;&#13;
</codefragment>
  </duplication>
  <duplication lines="8" tokens="19">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/landing.php" line="994"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/topics.php" line="112"/>
    <codefragment>                $topic .= $trans-&gt;getTopicItemTranslated($b);

                $topic .= '&lt;/a&gt;';

                $topic .= '&lt;/td&gt;';
                $i++;
                $t++;

</codefragment>
  </duplication>
  <duplication lines="10" tokens="24">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/landing.php" line="833"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/year.php" line="105"/>
    <codefragment>                    . $template . '"&gt;';

                $year .= $b-&gt;theYear;

                $year .= '&lt;/a&gt;';

                $year .= '&lt;/td&gt;';
                $i++;
                $t++;

</codefragment>
  </duplication>
  <duplication lines="22" tokens="46">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/media.php" line="117"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/biblestudy.media.class.php" line="99"/>
    <codefragment>        $downloadlink = '';

        if ($admin_params-&gt;get('default_download_image'))
        {
            $admin_d_image = $admin_params-&gt;get('default_download_image');
        }
        else
        {
            $admin_d_image = null;
        }
        $d_image = ($admin_d_image ? $admin_d_image : 'media/com_biblestudy/images/download.png');

        $download_image = $this-&gt;useJImage($d_image, JText::_('JBS_MED_DOWNLOAD'));

        if ($media-&gt;link_type &gt; 0)
        {
            $compat_mode = $admin_params-&gt;get('compat_mode');

            if ($compat_mode == 0)
            {
                $downloadlink = '&lt;a href="index.php?option=com_biblestudy&amp;amp;mid=' .
                    $media-&gt;id . '&amp;amp;view=sermons&amp;amp;task=download"&gt;';
</codefragment>
  </duplication>
  <duplication lines="19" tokens="54">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/media.php" line="184"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/biblestudy.media.class.php" line="161"/>
    <codefragment>        $filesize = '';

        if (!$media-&gt;size)
        {
            $table = null;

            return $table;
        }
        switch ($media-&gt;size)
        {
            case $media-&gt;size &lt; 1024 :
                $file_size = $media-&gt;size . ' ' . 'Bytes';
                break;
            case $media-&gt;size &lt; 1048576 :
                $file_size = $media-&gt;size / 1024;
                $file_size = number_format($file_size, 0);
                $file_size = $file_size . ' ' . 'KB';
                break;
            case $media-&gt;size &lt; 1073741824 :
</codefragment>
  </duplication>
  <duplication lines="44" tokens="77">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/media.php" line="399"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/biblestudy.media.class.php" line="391"/>
    <codefragment>        return $vm;
    }

    /**
     * Get duration
     *
     * @param   Object     $row     Table Row info
     * @param   Joomla\Registry\Registry$params  Params
     *
     * @return null|string
     */
    public function getFluidDuration($row, $params)
    {
        $duration = $row-&gt;media_hours . $row-&gt;media_minutes . $row-&gt;media_seconds;
        if (!$duration)
        {
            $duration = null;

            return $duration;
        }
        $duration_type = $params-&gt;get('duration_type', 2);
        $hours         = $row-&gt;media_hours;
        $minutes       = $row-&gt;media_minutes;
        $seconds       = $row-&gt;media_seconds;

        switch ($duration_type)
        {
            case 1:
                if (!$hours)
                {
                    $duration = $minutes . ' mins ' . $seconds . ' secs';
                }
                else
                {
                    $duration = $hours . ' hour(s) ' . $minutes . ' mins ' . $seconds . ' secs';
                }
                break;
            case 2:
                if (!$hours)
                {
                    $duration = $minutes . ':' . $seconds;
                }
                else
                {
</codefragment>
  </duplication>
  <duplication lines="24" tokens="43">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/media.php" line="564"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/biblestudy.media.class.php" line="562"/>
    <codefragment>                        break;

                    case 2: // This plays the video inline
                        $mediacode  = $this-&gt;getAVmediacode($media-&gt;mediacode, $media);
                        $playercode = JHTML::_('content.prepare', $mediacode);
                        break;
                }

                /** @var $playercode string */

                return $playercode;
                break;

            case 4: // Docman
                $playercode = $this-&gt;getDocman($media, $image);

                return $playercode;
                break;

            case 5: // Article
                $playercode = $this-&gt;getArticle($media, $image);

                return $playercode;
                break;
</codefragment>
  </duplication>
  <duplication lines="90" tokens="173">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/media.php" line="629"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/biblestudy.media.class.php" line="629"/>
    <codefragment>                return $playercode;
                break;
        }

        return false;
    }

    /**
     * Return AVMedia Code.
     *
     * @param   string  $mediacode  Media string
     * @param   object  $media      Media info
     *
     * @return string
     */
    public function getAVmediacode($mediacode, $media)
    {
        $bracketpos   = strpos($mediacode, '}');
        $bracketend   = strpos($mediacode, '{', $bracketpos);
        $dashposition = strpos($mediacode, '-', $bracketpos);
        $isonlydash   = substr_count($mediacode, '}-{');

        if ($isonlydash)
        {
            $mediacode = substr_replace($mediacode, 'http://' . $media-&gt;spath . $media-&gt;fpath . $media-&gt;filename, $dashposition, 1);
        }
        elseif ($dashposition)
        {
            $mediacode = substr_replace($mediacode, $media-&gt;spath . $media-&gt;fpath . $media-&gt;filename, $bracketend - 1, 1);
        }

        return $mediacode;
    }

    /**
     * Update Hit count for plays.
     *
     * @param   int  $id  ID to apply the hit to.
     *
     * @return boolean
     */
    public function hitPlay($id)
    {
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;update('#__bsms_mediafiles')
            -&gt;set('plays = plays + 1')
            -&gt;where('id = ' . $db-&gt;q($id));
        $db-&gt;setQuery($query);

        if ($db-&gt;execute())
        {
            return true;
        }

        return false;
    }

    /**
     * Return Media Table
     *
     * @param   object     $row           Table info
     * @param   Joomla\Registry\Registry$params        Item Params
     * @param   Joomla\Registry\Registry$admin_params  Admin Params
     *
     * @return null|string
     *
     * @deprecated 9.0.0
     */
    public function getMediaTable($row, $params, $admin_params)
    {
        // First we get some items from GET and instantiate the images class
        $input        = new JInput;
        $template     = $input-&gt;get('t', '1', 'int');
        $images       = new JBSMImages;
        $filesize     = null;
        $downloadlink = null;

        // Here we get the administration row from the component, and determine the download image to use
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('*')-&gt;from('#__bsms_admin');
        $db-&gt;setQuery($query);
        $admin    = $db-&gt;loadObject();
        $registry = new Registry;
        $registry-&gt;loadString($admin-&gt;params);
        $admin-&gt;params = $registry-&gt;toArray();

        if (isset($admin-&gt;params['default_download_image']))
        {
</codefragment>
  </duplication>
  <duplication lines="201" tokens="365">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/media.php" line="757"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/biblestudy.media.class.php" line="756"/>
    <codefragment>            $player     = self::getPlayerAttributes($params, $itemparams, $media);
            $playercode = self::getPlayerCode($params, $itemparams, $player, $image, $media);

            // Now we build the column for each media file
            $table .= '&lt;td&gt;';

            // Check to see if a download link is needed

            $link_type = $media-&gt;link_type;

            if ($link_type &gt; 0)
            {
                if ($compat_mode == 0)
                {
                    $downloadlink = '&lt;a href="index.php?option=com_biblestudy&amp;amp;mid=' .
                        $media-&gt;id . '&amp;amp;view=sermons&amp;amp;task=download"&gt;';
                }
                else
                {
                    $downloadlink = '&lt;a href="http://joomlabiblestudy.org/router.php?file=' .
                        $media-&gt;spath . $media-&gt;fpath . $media-&gt;filename . '&amp;amp;size=' . $media-&gt;size . '"&gt;';
                }

                // Check to see if they want to use a popup
                if ($params-&gt;get('useterms') &gt; 0)
                {

                    $downloadlink = '&lt;a class="modal" href="index.php?option=com_biblestudy&amp;amp;view=terms&amp;amp;tmpl=component&amp;amp;layout=modal&amp;amp;compat_mode='
                        . $compat_mode . '&amp;amp;mid=' . $media-&gt;id . '&amp;amp;t=' . $template . '" rel="{handler: \'iframe\', size: {x: 640, y: 480}}"&gt;';
                }
                $downloadlink .= $download_image . '&lt;/a&gt;';
            }
            switch ($link_type)
            {
                case 0:
                    $table .= $playercode;
                    break;

                case 1:
                    $table .= $playercode . $downloadlink;
                    break;

                case 2:
                    $table .= $downloadlink;
                    break;
            }
            // End of the column holding the media image
            $table .= '&lt;/td&gt;';

        } // End of foreach mediaids
        // End of row holding media image/link
        $table .= '&lt;/tr&gt;';
        $JBSMElements = new JBSMElements;

        // This is the last part of the table where we see if we need to display the file size
        if ($params-&gt;get('show_filesize') &gt; 0 &amp;&amp; isset($media))
        {
            $table .= '&lt;tr&gt;';

            foreach ($mediaids as $media)
            {
                switch ($params-&gt;get('show_filesize'))
                {
                    case 1:
                        $filesize = $JBSMElements-&gt;getFilesize($media-&gt;size);
                        break;
                    case 2:
                        $filesize = $media-&gt;comment;
                        break;
                    case 3:
                        if ($media-&gt;comment ? $filesize = $media-&gt;comment : $filesize = $JBSMElements-&gt;getFilesize($media-&gt;size))
                        {
                        }
                        break;
                }

                $table .= '&lt;td&gt;&lt;span class="bsfilesize"&gt;' . $filesize . '&lt;/span&gt;&lt;/td&gt;';

            } // End second foreach
            $table .= '&lt;/tr&gt;';

        } // End of if show_file size

        $table .= '&lt;/tbody&gt;&lt;/table&gt;';

        return $table;
    }

    /**
     * Get Media ID
     *
     * @param   int  $id  ID of media
     *
     * @return object
     */
    public function getMediaid($id)
    {
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('m.id as mid, m.study_id, s.id as sid')
            -&gt;from('#__bsms_mediafiles AS m')
            -&gt;leftJoin('#__bsms_studies AS s ON (m.study_id = s.id) WHERE s.id = ' . (int) $db-&gt;q($id));
        $db-&gt;setQuery($query);
        $mediaids = $db-&gt;loadObjectList();

        return $mediaids;
    }

    /**
     * Get Media info Row1
     *
     * @param   int  $id  ID of media Row
     *
     * @return object|boolean
     */
    public function getMediaRows($id)
    {
        if (!$id)
        {
            return false;
        }
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('#__bsms_mediafiles.*, #__bsms_servers.id AS ssid, #__bsms_servers.server_path AS spath, #__bsms_folders.id AS fid,'
            . ' #__bsms_folders.folderpath AS fpath, #__bsms_media.id AS mid, #__bsms_media.media_image_path AS impath, '
            . ' #__bsms_media.media_image_name AS imname,'
            . ' #__bsms_media.path2 AS path2, s.studytitle, s.studydate, s.studyintro, s.media_hours, s.media_minutes, s.media_seconds, s.teacher_id,'
            . ' s.booknumber, s.chapter_begin, s.chapter_end, s.verse_begin, s.verse_end, t.teachername, t.id as tid, s.id as sid, s.studyintro,'
            . ' #__bsms_media.media_alttext AS malttext, #__bsms_mimetype.id AS mtid, #__bsms_mimetype.mimetext, #__bsms_mimetype.mimetype');

        $query-&gt;from('#__bsms_mediafiles');

        $query-&gt;leftJoin('#__bsms_media ON (#__bsms_media.id = #__bsms_mediafiles.media_image)');

        $query-&gt;leftJoin('#__bsms_servers ON (#__bsms_servers.id = #__bsms_mediafiles.server)');

        $query-&gt;leftJoin('#__bsms_folders ON (#__bsms_folders.id = #__bsms_mediafiles.path)');

        $query-&gt;leftJoin('#__bsms_mimetype ON (#__bsms_mimetype.id = #__bsms_mediafiles.mime_type)');

        $query-&gt;leftJoin('#__bsms_studies AS s ON (s.id = #__bsms_mediafiles.study_id)');

        $query-&gt;leftJoin('#__bsms_teachers AS t ON (t.id = s.teacher_id)');

        $query-&gt;where('#__bsms_mediafiles.study_id = ' . (int) $id);
        $query-&gt;where('#__bsms_mediafiles.published = 1');
        $query-&gt;order('ordering ASC, #__bsms_media.media_image_name ASC');
        $db-&gt;setQuery($query);
        $media = $db-&gt;loadObjectList();

        if ($media)
        {
            return $media;
        }
        else
        {
            return false;
        }
    }

    /**
     * Get Media info Row2
     *
     * @param   int  $id  ID of Row
     *
     * @return object|boolean
     */
    public function getMediaRows2($id)
    {
        // We use this for the popup view because it relies on the media file's id rather than the study_id field above
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('#__bsms_mediafiles.*, #__bsms_servers.id AS ssid, #__bsms_servers.server_path AS spath, #__bsms_folders.id AS fid,'
            . ' #__bsms_folders.folderpath AS fpath, #__bsms_media.id AS mid, #__bsms_media.media_image_path AS impath,'
            . ' #__bsms_media.media_image_name AS imname, #__bsms_media.path2 AS path2, s.studyintro, s.media_hours, s.media_minutes, s.series_id,'
            . ' s.media_seconds, s.studytitle, s.studydate, s.teacher_id, s.booknumber, s.chapter_begin, s.chapter_end, s.verse_begin,'
            . ' s.verse_end, t.teachername, t.teacher_thumbnail, t.teacher_image, t.thumb, t.image, t.id as tid, s.id as sid, s.studyintro,'
            . ' #__bsms_media.media_alttext AS malttext,'
            . ' se.id as seriesid, se.series_text, se.series_thumbnail,'
            . ' #__bsms_mimetype.id AS mtid, #__bsms_mimetype.mimetext, #__bsms_mimetype.mimetype')
            -&gt;from('#__bsms_mediafiles')
            -&gt;leftJoin('#__bsms_media ON (#__bsms_media.id = #__bsms_mediafiles.media_image)')
            -&gt;leftJoin('#__bsms_servers ON (#__bsms_servers.id = #__bsms_mediafiles.server)')
            -&gt;leftJoin('#__bsms_folders ON (#__bsms_folders.id = #__bsms_mediafiles.path)')
            -&gt;leftJoin('#__bsms_mimetype ON (#__bsms_mimetype.id = #__bsms_mediafiles.mime_type)')
            -&gt;leftJoin('#__bsms_studies AS s ON (s.id = #__bsms_mediafiles.study_id)')
            -&gt;leftJoin('#__bsms_teachers AS t ON (t.id = s.teacher_id)')
            -&gt;leftJoin('#__bsms_series as se ON (s.series_id = se.id)')
            -&gt;where('#__bsms_mediafiles.id = ' . (int) $id)-&gt;where('#__bsms_mediafiles.published = ' . 1)
            -&gt;order('ordering asc, #__bsms_mediafiles.mime_type asc');
        $db-&gt;setQuery($query);
        $media = $db-&gt;loadObject();

        if ($media)
        {
            return $media;
        }
        else
        {
            return false;
        }
</codefragment>
  </duplication>
  <duplication lines="24" tokens="84">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/lib/stats.php" line="598"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/biblestudy.stats.class.php" line="68"/>
    <codefragment>            if (!$hits-&gt;studytitle)
            {
                $name = $hits-&gt;id;
            }
            else
            {
                $name = $hits-&gt;studytitle;
            }
            if ($format &lt; 1)
            {
                $total = $result-&gt;added + $hits-&gt;hits;
            }
            else
            {
                $total = $result-&gt;added;
            }
            $selectvalue   = JRoute::_('index.php?option=com_biblestudy&amp;view=sermon&amp;id=' . $hits-&gt;id . '&amp;t=' . $t);
            $selectdisplay = $name . ' - ' . JText::_('JBS_CMN_SCORE') . ': ' . $total;
            $final2        = array(
                'score'   =&gt; $total,
                'select'  =&gt; $selectvalue,
                'display' =&gt; $selectdisplay
            );
            $final[]       = $final2;
</codefragment>
  </duplication>
  <duplication lines="20" tokens="37">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/elements.php" line="395"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/listing.php" line="1839"/>
    <codefragment>    public function getScripture($params, $row, $esv, $scripturerow)
    {
        $scripture = '';

        if (!isset($row-&gt;id))
        {
            return null;
        }

        if (!isset($row-&gt;booknumber))
        {
            $row-&gt;booknumber = 0;
        }

        if (!isset($row-&gt;booknumber2))
        {
            $row-&gt;booknumber2 = 0;
        }

        if ($scripturerow == 2 &amp;&amp; $row-&gt;booknumber2 &gt;= 1)
</codefragment>
  </duplication>
  <duplication lines="68" tokens="106">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/elements.php" line="469"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/listing.php" line="1890"/>
    <codefragment>        $b1  = ' ';
        $b2  = ':';
        $b2a = ':';
        $b3  = '-';

        if ($show_verses == 1)
        {
            /** @var $ch_b string */
            /** @var $v_b string */
            /** @var $ch_e string */
            /** @var $v_e string */
            if ($ch_e == $ch_b)
            {
                $ch_e = '';
                $b2a  = '';
            }
            if ($ch_e == $ch_b &amp;&amp; $v_b == $v_e)
            {
                $b3   = '';
                $ch_e = '';
                $b2a  = '';
                $v_e  = '';
            }
            if ($v_b == 0)
            {
                $v_b = '';
                $v_e = '';
                $b2a = '';
                $b2  = '';
            }
            if ($v_e == 0)
            {
                $v_e = '';
                $b2a = '';
            }
            if ($ch_e == 0)
            {
                $b2a  = '';
                $ch_e = '';

                if ($v_e == 0)
                {
                    $b3 = '';
                }
            }
            $scripture = $book . $b1 . $ch_b . $b2 . $v_b . $b3 . $ch_e . $b2a . $v_e;
        }
        // Else
        if ($show_verses == 0)
        {
            /** @var $ch_e string */
            /** @var $ch_b string */
            if ($ch_e &gt; $ch_b)
            {
                $scripture = $book . $b1 . $ch_b . $b3 . $ch_e;
            }
            else
            {
                $scripture = $book . $b1 . $ch_b;
            }
        }
        if ($esv == 1)
        {
            /** @var $ch_b string */
            /** @var $v_b string */
            /** @var $ch_e string */
            /** @var $v_e string */
            if ($ch_e == $ch_b)
</codefragment>
  </duplication>
  <duplication lines="12" tokens="21">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/duration.php" line="19"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/listing.php" line="2008"/>
    <codefragment>function getDuration($params, $row) {&#13;
&#13;
    $duration = $row-&gt;media_hours . $row-&gt;media_minutes . $row-&gt;media_seconds;&#13;
    if (!$duration) {&#13;
        $duration = null;&#13;
        return $duration;&#13;
    }&#13;
    $duration_type = $params-&gt;get('duration_type', 2);&#13;
    $hours = $row-&gt;media_hours;&#13;
    $minutes = $row-&gt;media_minutes;&#13;
    $seconds = $row-&gt;media_seconds;&#13;
&#13;
</codefragment>
  </duplication>
  <duplication lines="23" tokens="71">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/date.php" line="19"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/listing.php" line="2063"/>
    <codefragment>function getstudyDate($params, $studydate) {&#13;
    switch ($params-&gt;get('date_format')) {&#13;
        case 0:&#13;
            $date = JHTML::_('date', $studydate, "M j, Y");&#13;
            break;&#13;
        case 1:&#13;
            $date = JHTML::_('date', $studydate, "M J");&#13;
            break;&#13;
        case 2:&#13;
            $date = JHTML::_('date', $studydate, "n/j/Y");&#13;
            break;&#13;
        case 3:&#13;
            $date = JHTML::_('date', $studydate, "n/j");&#13;
            break;&#13;
        case 4:&#13;
            $date = JHTML::_('date', $studydate, "l, F j, Y");&#13;
            break;&#13;
        case 5:&#13;
            $date = JHTML::_('date', $studydate, "F j, Y");&#13;
            break;&#13;
        case 6:&#13;
            $date = JHTML::_('date', $studydate, "j F Y");&#13;
            break;&#13;
</codefragment>
  </duplication>
  <duplication lines="7" tokens="26">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/helpers/header.php" line="475"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/lib/listing.php" line="2872"/>
    <codefragment>function getCustomhead($rowcolid, $params) {&#13;
    $row = substr($rowcolid, 3, 1);&#13;
    $col = substr($rowcolid, 7, 1);&#13;
    $customhead = $params-&gt;get('r' . $row . 'c' . $col . 'customlabel');&#13;
&#13;
    return $customhead;&#13;
}</codefragment>
  </duplication>
  <duplication lines="36" tokens="55">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/filesize.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/fields/filesize.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

jimport('joomla.html.html');
jimport('joomla.access.access');
jimport('joomla.form.formfield');

/**
 * Form Field class for the FileSize
 *
 * @package  BibleStudy.Admin
 * @since    7.0.0
 */
class JFormFieldFilesize extends JFormField
{

    /**
     *  Set Naming of type
     *
     * @var string
     */
    public $type = 'Filesize';

    /**
     * Get impute of form
     *
     * @return string
     */
    protected function getInput()
    {
        // Initialize some field attributes.
        $size      = $this-&gt;element['size'] ? ' size="' . (int) $this-&gt;element['size'] . '"' : '';
        $maxLength = $this-&gt;element['maxlength'] ? ' maxlength="' . (int) $this-&gt;element['maxlength'] . '"' : '';
        $class     = $this-&gt;element['class'] ? ' class="' . (string) $this-&gt;element['class'] . '"' : '';
        $readonly  = ((string) $this-&gt;element['readonly'] == 'true') ? ' readonly="readonly"' : '';
        $disabled  = ((string) $this-&gt;element['disabled'] == 'true') ? ' disabled="disabled"' : '';

</codefragment>
  </duplication>
  <duplication lines="25" tokens="47">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/modal/study.php" line="78"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/fields/modal/article.php" line="79"/>
    <codefragment>        $html[] = '    &lt;a class="modal" title="' . JText::_('JBS_CMN_STUDY_CHANGE') . '"  href="' . $link . '" rel="{handler: \'iframe\', size: {x: 800, y: 450}}"&gt;' . JText::_('JBS_CMN_STUDY_CHANGE') . '&lt;/a&gt;';
        $html[] = '  &lt;/div&gt;';
        $html[] = '&lt;/div&gt;';

        // The active article id field.
        if (0 == (int) $this-&gt;value) {
            $value = '';
        } else {
            $value = (int) $this-&gt;value;
        }

        // class='required' for client side validation
        $class = '';
        if ($this-&gt;required) {
            $class = ' class="required modal-value"';
        }

        $html[] = '&lt;input type="hidden" id="' . $this-&gt;id . '_id"' . $class . ' name="' . $this-&gt;name . '" value="' . $value . '" /&gt;';

        return implode("\n", $html);
    }

}</codefragment>
  </duplication>
  <duplication lines="32" tokens="74">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/modal/study.php" line="72"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/fields/modal/study.php" line="72"/>
    <codefragment>        $html[] = '  &lt;input type="text" id="' . $this-&gt;id . '_name" value="' . $title . '" disabled="disabled" size="35" /&gt;';
        $html[] = '&lt;/div&gt;';

        // The user select button.
        $html[] = '&lt;div class="button2-left"&gt;';
        $html[] = '  &lt;div class="blank"&gt;';
        $html[] = '    &lt;a class="modal" title="' . JText::_('JBS_CMN_STUDY_CHANGE') . '"  href="' . $link . '" rel="{handler: \'iframe\', size: {x: 800, y: 450}}"&gt;' . JText::_('JBS_CMN_STUDY_CHANGE') . '&lt;/a&gt;';
        $html[] = '  &lt;/div&gt;';
        $html[] = '&lt;/div&gt;';

        // The active article id field.
        if (0 == (int) $this-&gt;value) {
            $value = '';
        } else {
            $value = (int) $this-&gt;value;
        }

        // class='required' for client side validation
        $class = '';
        if ($this-&gt;required) {
            $class = ' class="required modal-value"';
        }

        $html[] = '&lt;input type="hidden" id="' . $this-&gt;id . '_id"' . $class . ' name="' . $this-&gt;name . '" value="' . $value . '" /&gt;';

        return implode("\n", $html);
    }

}</codefragment>
  </duplication>
  <duplication lines="23" tokens="47">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/modal/studydetails.php" line="93"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/fields/modal/studydetails.php" line="87"/>
    <codefragment>        $html .= '&lt;div class="button2-left"&gt;&lt;div class="blank"&gt;&lt;a class="modal" title="' . JText::_('JBS_CMN_SELECT_STUDY') . '"  href="' . $link . '" rel="{handler: \'iframe\', size: {x: 900, y: 450}}"&gt;' . JText::_('JBS_CMN_SELECT_STUDY') . '&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;' . "\n";
        // The active study id field.
        if (0 == (int) $this-&gt;value) {
            $value = '';
        } else {
            $value = (int) $this-&gt;value;
        }

        // class='required' for client side validation
        $class = '';
        if ($this-&gt;required) {
            $class = ' class="required modal-value"';
        }

        $html .= '&lt;input type="hidden" id="' . $this-&gt;id . '_id"' . $class . ' name="' . $this-&gt;name . '" value="' . $value . '" /&gt;';

        return $html;
    }

}
</codefragment>
  </duplication>
  <duplication lines="20" tokens="66">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/topicslist.php" line="41"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/fields/topicslist.php" line="39"/>
    <codefragment>    protected function getOptions()
    {
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('id, topic_text, params AS topic_params')-&gt;from('#__bsms_topics')-&gt;where('published = ' . 1)-&gt;order('topic_text asc');
        $db-&gt;setQuery((string) $query);
        $topics  = $db-&gt;loadObjectList();
        $options = array();

        if ($topics)
        {
            foreach ($topics as $topic)
            {
                $text      = JBSMTranslated::getTopicItemTranslated($topic);
                $options[] = JHtml::_('select.option', $topic-&gt;id, $text);
            }
        }
        $options = array_merge(parent::getOptions(), $options);

        return $options;
</codefragment>
  </duplication>
  <duplication lines="65" tokens="130">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/fields/virtuemart.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/fields/virtuemart.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

// Import the list field type
jimport('joomla.form.helper');

JFormHelper::loadFieldClass('list');

/**
 * Virtuemart Category List Form Field class for the Joomla Bible Study component
 *
 * @package  BibleStudy.Admin
 * @since    7.0.4
 */
class JFormFieldVirtuemart extends JFormFieldList
{

    /**
     * The field type.
     *
     * @var         string
     */
    protected $type = 'Virtuemart';

    /**
     * Method to get a list of options for a list input.
     *
     * @return      array           An array of JHtml options.
     */
    protected function getOptions()
    {
        $params = JComponentHelper::getParams('com_languages');

        // Use default joomla
        $siteLang = $params-&gt;get('site', 'en-GB');
        $lang     = strtolower(strtr($siteLang, '-', '_'));
        define('VMLANG', $lang);

        // Check to see if component installed
        jimport('joomla.filesystem.folder');

        if (!JFolder::exists(JPATH_ADMINISTRATOR . DIRECTORY_SEPARATOR . 'components' . DIRECTORY_SEPARATOR . 'com_virtuemart'))
        {
            return JText::_('JBS_CMN_VIRTUEMART_NOT_INSTALLED');
        }
        $db    = JFactory::getDBO();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('v.virtuemart_product_id, v.product_name');
        $query-&gt;from('#__virtuemart_products_' . VMLANG . ' AS v');
        $query-&gt;select('p.product_sku');
        $query-&gt;join('LEFT', '#__virtuemart_products as p ON v.virtuemart_product_id = p.virtuemart_product_id');
        $query-&gt;order('v.virtuemart_product_id DESC');
        $db-&gt;setQuery((string) $query);
        $products = $db-&gt;loadObjectList();
        $options  = array();

        if ($products)
        {
            foreach ($products as $product)
            {
                $options[] = JHtml::_('select.option', $product-&gt;virtuemart_product_id, $product-&gt;product_name . ' (' . $product-&gt;product_sku . ')');
            }
        }
        $options = array_merge(parent::getOptions(), $options);

        return $options;
</codefragment>
  </duplication>
  <duplication lines="13" tokens="12">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/commentform.php" line="82"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/mediafileform.php" line="98"/>
    <codefragment>        return $value;
    }

    /**
     * Get the return URL.
     *
     * @return  string    The return URL.
     *
     * @since    1.6
     */
    public function getReturnPage()
    {
        return base64_encode($this-&gt;getState('return_page'));
</codefragment>
  </duplication>
  <duplication lines="12" tokens="11">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/message.php" line="471"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/message.php" line="352"/>
    <codefragment>        return JTable::getInstance($type, $prefix, $config);
    }

    /**
     * Prepare and sanitise the table prior to saving.
     *
     * @param   JTable $table  A reference to a JTable object.
     *
     * @return    void
     *
     * @since    1.6
     */
</codefragment>
  </duplication>
  <duplication lines="13" tokens="39">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/mediafile.php" line="563"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/message.php" line="405"/>
    <codefragment>        $table = $this-&gt;getTable();&#13;
&#13;
        // Attempt to load the row.&#13;
        $return = $table-&gt;load($itemId);&#13;
&#13;
        // Check for a table object error.&#13;
        if ($return === false &amp;&amp; $table-&gt;getError()) {&#13;
            $this-&gt;setError($table-&gt;getError());&#13;
            return false;&#13;
        }&#13;
        $properties = $table-&gt;getProperties(1);&#13;
        $value = JArrayHelper::toObject($properties, 'JObject'); &#13;
        return $value;&#13;
</codefragment>
  </duplication>
  <duplication lines="28" tokens="38">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/commentform.php" line="68"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/messageform.php" line="65"/>
    <codefragment>        $table = $this-&gt;getTable();

        // Attempt to load the row.
        $return = $table-&gt;load($pk);

        // Check for a table object error.
        if ($return === false)
        {
            return false;
        }

        $properties = $table-&gt;getProperties(1);
        $value      = JArrayHelper::toObject($properties, 'JObject');

        return $value;
    }

    /**
     * Get the return URL.
     *
     * @return  string    The return URL.
     *
     * @since    1.6
     */
    public function getReturnPage()
    {
        return base64_encode($this-&gt;getState('return_page'));
    }
</codefragment>
  </duplication>
  <duplication lines="36" tokens="83">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/seriesdisplay.php" line="137"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/sermons.php" line="188"/>
    <codefragment>        $user            = JFactory::getUser();
        $groups          = implode(',', $user-&gt;getAuthorisedViewLevels());
        $db              = $this-&gt;getDbo();
        $query           = $db-&gt;getQuery(true);
        $template_params = JBSMParams::getTemplateparams();
        $t_params        = $template_params-&gt;params;
        $query-&gt;select(
            $this-&gt;getState(
                'list.select', 'study.id, study.published, study.studydate, study.studytitle, study.booknumber, study.chapter_begin,
                        study.verse_begin, study.chapter_end, study.verse_end, study.hits, study.alias, study.studyintro,
                        study.teacher_id, study.secondary_reference, study.booknumber2, study.location_id, study.media_hours, study.media_minutes,
                        study.media_seconds, study.series_id, study.download_id, study.thumbnailm, study.thumbhm, study.thumbwm,
                        study.access, study.user_name, study.user_id, study.studynumber, study.chapter_begin2, study.chapter_end2,
                        study.verse_end2, study.verse_begin2 ') . ','
            . ' CASE WHEN CHAR_LENGTH(study.alias) THEN CONCAT_WS(\':\', study.id, study.alias) ELSE study.id END as slug ');
        $query-&gt;from('#__bsms_studies AS study');

        // Join over Message Types
        $query-&gt;select('messageType.message_type AS message_type');
        $query-&gt;join('LEFT', '#__bsms_message_type AS messageType ON messageType.id = study.messagetype');

        // Join over Teachers
        $query-&gt;select('teacher.teachername AS teachername, teacher.title as teachertitle, teacher.teacher_thumbnail as thumb, teacher.thumbh, teacher.thumbw');
        $query-&gt;join('LEFT', '#__bsms_teachers AS teacher ON teacher.id = study.teacher_id');

        // Join over Series
        $query-&gt;select('series.series_text, series.series_thumbnail, series.description as sdescription, series.access as series_access');
        $query-&gt;join('LEFT', '#__bsms_series AS series ON series.id = study.series_id');

        // Join over Books
        $query-&gt;select('book.bookname');
        $query-&gt;join('LEFT', '#__bsms_books AS book ON book.booknumber = study.booknumber');

        // Join over Plays/Downloads
        $query-&gt;select('SUM(mediafile.plays) AS totalplays, SUM(mediafile.downloads) as totaldownloads, mediafile.study_id');
        $query-&gt;join('LEFT', '#__bsms_mediafiles AS mediafile ON mediafile.study_id = study.id');
</codefragment>
  </duplication>
  <duplication lines="8" tokens="21">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/messages.php" line="425"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/sermons.php" line="716"/>
    <codefragment>        $query-&gt;join('INNER', '#__bsms_studies AS study ON study.booknumber = book.booknumber');
        $query-&gt;group('book.id');
        $query-&gt;order('book.booknumber');
        $db-&gt;setQuery($query-&gt;__toString());
        $db_result = $db-&gt;loadAssocList();

        foreach ($db_result as $i =&gt; $value)
        {
</codefragment>
  </duplication>
  <duplication lines="17" tokens="19">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/models/messages.php" line="473"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/sermons.php" line="777"/>
    <codefragment>        $query-&gt;order('series.series_text');
        $db-&gt;setQuery($query-&gt;__toString());

        return $db-&gt;loadObjectList();
    }

    /**
     * Get a list of all used message types
     *
     * @since 7.0
     * @return object
     */
    public function getMessageTypes()
    {
        $db    = $this-&gt;getDbo();
        $query = $db-&gt;getQuery(true);
        $query-&gt;select('messageType.id AS value, messageType.message_type AS text');
</codefragment>
  </duplication>
  <duplication lines="37" tokens="90">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/seriesdisplay.php" line="136"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/models/teacher.php" line="127"/>
    <codefragment>        $params     = $app-&gt;getParams();
        $user            = JFactory::getUser();
        $groups          = implode(',', $user-&gt;getAuthorisedViewLevels());
        $db              = $this-&gt;getDbo();
        $query           = $db-&gt;getQuery(true);
        $template_params = JBSMParams::getTemplateparams();
        $t_params        = $template_params-&gt;params;
        $query-&gt;select(
            $this-&gt;getState(
                'list.select', 'study.id, study.published, study.studydate, study.studytitle, study.booknumber, study.chapter_begin,
                        study.verse_begin, study.chapter_end, study.verse_end, study.hits, study.alias, study.studyintro,
                        study.teacher_id, study.secondary_reference, study.booknumber2, study.location_id, study.media_hours, study.media_minutes,
                        study.media_seconds, study.series_id, study.download_id, study.thumbnailm, study.thumbhm, study.thumbwm,
                        study.access, study.user_name, study.user_id, study.studynumber, study.chapter_begin2, study.chapter_end2,
                        study.verse_end2, study.verse_begin2 ') . ','
            . ' CASE WHEN CHAR_LENGTH(study.alias) THEN CONCAT_WS(\':\', study.id, study.alias) ELSE study.id END as slug ');
        $query-&gt;from('#__bsms_studies AS study');

        // Join over Message Types
        $query-&gt;select('messageType.message_type AS message_type');
        $query-&gt;join('LEFT', '#__bsms_message_type AS messageType ON messageType.id = study.messagetype');

        // Join over Teachers
        $query-&gt;select('teacher.teachername AS teachername, teacher.title as teachertitle, teacher.teacher_thumbnail as thumb, teacher.thumbh, teacher.thumbw');
        $query-&gt;join('LEFT', '#__bsms_teachers AS teacher ON teacher.id = study.teacher_id');

        // Join over Series
        $query-&gt;select('series.series_text, series.series_thumbnail, series.description as sdescription, series.access as series_access');
        $query-&gt;join('LEFT', '#__bsms_series AS series ON series.id = study.series_id');

        // Join over Books
        $query-&gt;select('book.bookname');
        $query-&gt;join('LEFT', '#__bsms_books AS book ON book.booknumber = study.booknumber');

        // Join over Plays/Downloads
        $query-&gt;select('SUM(mediafile.plays) AS totalplays, SUM(mediafile.downloads) as totaldownloads, mediafile.study_id');
        $query-&gt;join('LEFT', '#__bsms_mediafiles AS mediafile ON mediafile.study_id = study.id');
</codefragment>
  </duplication>
  <duplication lines="44" tokens="55">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/comment.php" line="90"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/tables/commentsedit.php" line="74"/>
    <codefragment>    public function TableComment(&amp; $db)
    {
        parent::__construct('#__bsms_comments', 'id', $db);
    }

    /**
     * Method to compute the default name of the asset.
     * The default name is in the form `table_name.id`
     * where id is the value of the primary key of the table.
     *
     * @return      string
     *
     * @since       1.6
     */
    protected function _getAssetName()
    {
        $k = $this-&gt;_tbl_key;

        return 'com_biblestudy.comment.' . (int) $this-&gt;$k;
    }

    /**
     * Method to return the title to use for the asset table.
     *
     * @return      string
     *
     * @since       1.6
     */
    protected function _getAssetTitle()
    {
        $title = 'JBS Comment - id/date: ' . $this-&gt;user_id . ' - ' . $this-&gt;comment_date;

        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
</codefragment>
  </duplication>
  <duplication lines="9" tokens="29">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/mediafile.php" line="294"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/tables/mediafile.php" line="255"/>
    <codefragment>    public function load($pk = null, $reset = true)
    {
        if (parent::load($pk, $reset))
        {
            // Convert the params field to a registry.
            $params = new Registry;
            $params-&gt;loadString($this-&gt;params);
            $this-&gt;params = $params;

</codefragment>
  </duplication>
  <duplication lines="20" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/tables/admin.php" line="192"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/tables/message.php" line="303"/>
    <codefragment>        return $title;
    }

    /**
     * Method to get the parent asset under which to register this one.
     * By default, all assets are registered to the ROOT node with ID 1.
     * The extended class can define a table and id to lookup.  If the
     * asset does not exist it will be created.
     *
     * @param   JTable  $table  A JTable object for the asset parent.
     * @param   integer $id     Id to look up
     *
     * @return  integer
     *
     * @since   11.1
     */
    protected function _getAssetParentId($table = null, $id = null)
    {
        $asset = JTable::getInstance('Asset');
        $asset-&gt;loadByName('com_biblestudy');
</codefragment>
  </duplication>
  <duplication lines="33" tokens="44">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/tables/message.php" line="290"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/tables/studydetails.php" line="212"/>
    <codefragment>    protected function _getAssetName() {&#13;
        $k = $this-&gt;_tbl_key;&#13;
        return 'com_biblestudy.message.' . (int) $this-&gt;$k;&#13;
    }&#13;
&#13;
    /**&#13;
     * Method to return the title to use for the asset table.&#13;
     *&#13;
     * @return      string&#13;
     * @since       1.6&#13;
     */&#13;
    protected function _getAssetTitle() {&#13;
        $title = 'JBS Message: ' . $this-&gt;studytitle;&#13;
        return $title;&#13;
    }&#13;
&#13;
    /**&#13;
     * Method to get the parent asset under which to register this one.&#13;
     * By default, all assets are registered to the ROOT node with ID 1.&#13;
     * The extended class can define a table and id to lookup.  If the&#13;
     * asset does not exist it will be created.&#13;
     *&#13;
     * @param   JTable   $table  A JTable object for the asset parent.&#13;
     * @param   integer  $id     Id to look up&#13;
     *&#13;
     * @return  integer&#13;
     *&#13;
     * @since   11.1&#13;
     */&#13;
    protected function _getAssetParentId($table = null, $id = null) {&#13;
        $asset = JTable::getInstance('Asset');&#13;
        $asset-&gt;loadByName('com_biblestudy');&#13;
        return $asset-&gt;id;&#13;
</codefragment>
  </duplication>
  <duplication lines="12" tokens="23">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comment/tmpl/edit.php" line="61"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentform/tmpl/edit.php" line="83"/>
    <codefragment>                                &lt;?php echo $this-&gt;form-&gt;getLabel('comment_text'); ?&gt;
                            &lt;/div&gt;
                            &lt;div class="controls"&gt;
                                &lt;?php echo $this-&gt;form-&gt;getInput('comment_text'); ?&gt;
                            &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;div class="control-group"&gt;
                            &lt;div class="control-label"&gt;
                                &lt;?php echo $this-&gt;form-&gt;getLabel('study_id'); ?&gt;
                            &lt;/div&gt;
                            &lt;div class="controls"&gt;
                                &lt;?php echo $this-&gt;form-&gt;getInput('study_id'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="24" tokens="53">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="78"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentlist/tmpl/default.php" line="86"/>
    <codefragment>                           class="element-invisible"&gt;&lt;?php echo JText::_('JGLOBAL_DISPLAY_NUM'); ?&gt;&lt;/label&gt;
                    &lt;?php echo $this-&gt;pagination-&gt;getLimitBox(); ?&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right hidden-phone"&gt;
                    &lt;label for="directionTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/label&gt;
                    &lt;select name="directionTable" id="directionTable" class="input-medium"
                            onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JFIELD_ORDERING_DESC'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="asc" &lt;?php if ($listDirn == 'asc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_ASCENDING'); ?&gt;&lt;/option&gt;
                        &lt;option
                            value="desc" &lt;?php if ($listDirn == 'desc') echo 'selected="selected"'; ?&gt;&gt;&lt;?php echo JText::_('JBS_CMN_DESCENDING'); ?&gt;&lt;/option&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;div class="btn-group pull-right"&gt;
                    &lt;label for="sortTable"
                           class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_BY'); ?&gt;&lt;/label&gt;
                    &lt;select name="sortTable" id="sortTable" class="input-medium" onchange="Joomla.orderTable()"&gt;
                        &lt;option value=""&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_BY'); ?&gt;&lt;/option&gt;
                        &lt;?php echo JHtml::_('select.options', $sortFields, 'value', 'text', $listOrder); ?&gt;
                    &lt;/select&gt;
                &lt;/div&gt;
                &lt;?php if (!BIBLESTUDY_CHECKREL): ?&gt;
</codefragment>
  </duplication>
  <duplication lines="19" tokens="60">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="164"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentlist/tmpl/default.php" line="173"/>
    <codefragment>                            &lt;?php echo JHtml::_('jgrid.published', $item-&gt;published, $i, 'comments.', $canChange, 'cb', '', ''); ?&gt;
                        &lt;/td&gt;

                        &lt;td class="nowrap has-context"&gt;
                            &lt;div class="pull-left"&gt;
                                &lt;?php if ($canEdit || $canEditOwn) : ?&gt;
                                    &lt;a href="&lt;?php echo $link; ?&gt;"&gt;&lt;?php echo $this-&gt;escape($item-&gt;studytitle) . ' - ' . JText::_($item-&gt;bookname) . ' ' . $item-&gt;chapter_begin; ?&gt;&lt;/a&gt;
                                &lt;?php else : ?&gt;
                                    &lt;?php echo $this-&gt;escape($item-&gt;studytitle) . ' - ' . JText::_($item-&gt;bookname) . ' ' . $item-&gt;chapter_begin; ?&gt;
                                &lt;?php endif; ?&gt;
                            &lt;/div&gt;
                            &lt;div class="pull-left"&gt;
                                &lt;?php
                                if (BIBLESTUDY_CHECKREL)
                                {
                                    // Create dropdown items
                                    JHtml::_('dropdown.edit', $item-&gt;id, 'comment.');
                                    JHtml::_('dropdown.divider');
                                    if ($item-&gt;published) :
</codefragment>
  </duplication>
  <duplication lines="14" tokens="27">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default.php" line="230"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentlist/tmpl/default.php" line="236"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php // Load the batch processing form. ?&gt;
            &lt;?php echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="29" tokens="39">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/tmpl/default_batch.php" line="10"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentlist/tmpl/default_batch.php" line="10"/>
    <codefragment>defined('_JEXEC') or die;

$published = $this-&gt;state-&gt;get('filter.published');
?&gt;
&lt;div class="modal hide fade" id="collapseModal"&gt;
    &lt;div class="modal-header"&gt;
        &lt;?php if (BIBLESTUDY_CHECKREL)
        {
            ?&gt;
            &lt;button type="button" role="presentation" class="close" data-dismiss="modal"&gt;x&lt;/button&gt;&lt;?php } ?&gt;
        &lt;h3&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_OPTIONS'); ?&gt;&lt;/h3&gt;
    &lt;/div&gt;
    &lt;div class="modal-body"&gt;
        &lt;p&gt;&lt;?php echo JText::_('JBS_CMN_BATCH_TIP'); ?&gt;&lt;/p&gt;

        &lt;div class="control-group"&gt;
            &lt;div class="controls"&gt;
                &lt;?php echo JHtml::_('batch.access'); ?&gt;
            &lt;/div&gt;
        &lt;/div&gt;

    &lt;/div&gt;
    &lt;div class="modal-footer"&gt;
        &lt;button class="btn" type="button" onclick="document.id('batch-folders-id');document.id('batch-access').value=''"
                data-dismiss="modal"&gt;
            &lt;?php echo JText::_('JCANCEL'); ?&gt;
        &lt;/button&gt;
        &lt;button class="btn btn-primary" type="submit" onclick="Joomla.submitbutton('comment.batch');"&gt;
            &lt;?php echo JText::_('JGLOBAL_BATCH_PROCESS'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="6" tokens="44">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="83"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentlist/view.html.php" line="78"/>
    <codefragment>        $options   = array();
        $options[] = JHtml::_('select.option', '1', JText::_('J1'));
        $options[] = JHtml::_('select.option', '2', JText::_('J2'));
        $options[] = JHtml::_('select.option', '3', JText::_('J3'));
        $options[] = JHtml::_('select.option', '4', JText::_('J4'));
        $options[] = JHtml::_('select.option', '5', JText::_('J5'));
</codefragment>
  </duplication>
  <duplication lines="22" tokens="56">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/comments/view.html.php" line="191"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentlist/view.html.php" line="115"/>
    <codefragment>    protected function setDocument()
    {
        $document = JFactory::getDocument();
        $document-&gt;setTitle(JText::_('JBS_TITLE_COMMENTS'));
    }

    /**
     * Returns an array of fields the table can be sorted by
     *
     * @return  array  Array containing the field name to sort by as the key and display text as value
     *
     * @since   3.0
     */
    protected function getSortFields()
    {
        return array(
            'comment.full_name' =&gt; JText::_('JBS_CMT_FULL_NAME'),
            'comment.published' =&gt; JText::_('JSTATUS'),
            'study.studytitle'  =&gt; JText::_('JBS_CMN_TITLE'),
            'comment.language'  =&gt; JText::_('JGRID_HEADING_LANGUAGE'),
            'access_level'      =&gt; JText::_('JGRID_HEADING_ACCESS'),
            'comment.id'        =&gt; JText::_('JGRID_HEADING_ID')
</codefragment>
  </duplication>
  <duplication lines="16" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="231"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentslist/tmpl/default.php" line="42"/>
    <codefragment>                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
            &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
            &lt;?php echo JHtml::_('form.token'); ?&gt;
        &lt;/div&gt;
&lt;/form&gt;
</codefragment>
  </duplication>
  <duplication lines="15" tokens="56">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentsedit/view.html.php" line="57"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentslist/view.html.php" line="58"/>
    <codefragment>        $document = JFactory::getDocument();&#13;
        $document-&gt;addStyleSheet(JURI::base() . 'administrator/templates/system/css/system.css');&#13;
        $document-&gt;addStyleSheet(JURI::base() . 'administrator/templates/bluestork/css/template.css');&#13;
        //Load the Admin settings&#13;
        $this-&gt;loadHelper('params');&#13;
        $this-&gt;admin = BsmHelper::getAdmin($issite = true);&#13;
        //check permissions to enter studies&#13;
        //check permissions to enter studies&#13;
        if (!$this-&gt;canDo-&gt;get('core.edit')) {&#13;
            JError::raiseError(403, JText::_('JERROR_ALERTNOAUTHOR'));&#13;
            return false;&#13;
        }&#13;
        $this-&gt;setLayout('form');&#13;
&#13;
&#13;
</codefragment>
  </duplication>
  <duplication lines="6" tokens="28">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafile/tmpl/edit.php" line="36"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafileform/tmpl/edit.php" line="51"/>
    <codefragment>$study = $app-&gt;getUserState($option . 'sid');
$sdate = $app-&gt;getUserState($option . 'sdate');
$size = $app-&gt;getUserState($option . 'size');
$fname = $app-&gt;getUserState($option . 'fname');
$serverid = $app-&gt;getUserState($option . 'serverid');

</codefragment>
  </duplication>
  <duplication lines="28" tokens="100">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafile/tmpl/edit.php" line="207"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafileform/tmpl/edit.php" line="304"/>
    <codefragment>            &lt;?php echo $this-&gt;form-&gt;getLabel('createdate'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('createdate', null, empty($this-&gt;item-&gt;createdate) ? $sdate : null); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('study_id'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('study_id', null, empty($this-&gt;item-&gt;study_id) ? $study : null); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('podcast_id'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('podcast_id', null, empty($this-&gt;item-&gt;study_id) ? $this-&gt;admin_params-&gt;get('podcast') : null); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('link_type'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('link_type', null, empty($this-&gt;item-&gt;study_id) ? $this-&gt;admin_params-&gt;get('download') : $this-&gt;item-&gt;link_type); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="20" tokens="57">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediafile/tmpl/edit.php" line="279"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafileform/tmpl/edit.php" line="427"/>
    <codefragment>            &lt;?php echo $this-&gt;form-&gt;getLabel('server'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('server', null, empty($this-&gt;item-&gt;server) ? $server : null); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('path'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('path', null, empty($this-&gt;item-&gt;study_id) ? $folder : null); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('filename'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('filename', null, empty($this-&gt;item-&gt;filename) ? $fname : null); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="16" tokens="44">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentlist/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafilelist/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::addIncludePath(JPATH_COMPONENT . '/helpers/html');
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
    JHtml::stylesheet('media/com_biblestudy/css/biblestudy-j2.5.css');
    JHtml::stylesheet('media/com_biblestudy/jui/css/bootstrap.css');
    JHtml::script('media/com_biblestudy/jui/js/jquery.js');
    JHtml::script('media/com_biblestudy/jui/js/jquery-noconflict.js');
</codefragment>
  </duplication>
  <duplication lines="12" tokens="22">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="228"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafilelist/tmpl/default.php" line="210"/>
    <codefragment>                            &lt;?php echo (int) $item-&gt;id; ?&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;
                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
</codefragment>
  </duplication>
  <duplication lines="9" tokens="39">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafileform/view.html.php" line="208"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafilelist/view.html.php" line="162"/>
    <codefragment>        if ($app-&gt;getCfg('sitename_pagetitles', 0) == 1)
        {
            $title = JText::sprintf('JPAGETITLE', $app-&gt;getCfg('sitename'), $title);
        }
        elseif ($app-&gt;getCfg('sitename_pagetitles', 0) == 2)
        {
            $title = JText::sprintf('JPAGETITLE', $title, $app-&gt;getCfg('sitename'));
        }
        $this-&gt;document-&gt;setTitle($title);
</codefragment>
  </duplication>
  <duplication lines="81" tokens="145">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/message/tmpl/edit.php" line="109"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messageform/tmpl/edit.php" line="143"/>
    <codefragment>            &lt;?php echo $this-&gt;form-&gt;getInput('booknumber', null, empty($this-&gt;item-&gt;studytitle) ? $this-&gt;admin_params-&gt;get('booknumber') : $this-&gt;item-&gt;booknumber); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('chapter_begin'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('chapter_begin'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('verse_begin'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('verse_begin'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('chapter_end'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('chapter_end'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('verse_end'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('verse_end'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('booknumber2'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('booknumber2'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('chapter_begin2'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('chapter_begin2'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('verse_begin2'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('verse_begin2'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('chapter_end2'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('chapter_end2'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('verse_end2'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('verse_end2'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('secondary_reference'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('secondary_reference'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="33" tokens="58">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/message/tmpl/edit.php" line="388"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messageform/tmpl/edit.php" line="305"/>
    <codefragment>            &lt;?php echo JText::_('JBS_STY_HITS'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls span12 small"&gt;
            &lt;?php echo $this-&gt;item-&gt;hits; ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('published'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('published'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('studydate'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('studydate'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('comments'); ?&gt;
        &lt;/div&gt;
        &lt;div class="controls"&gt;
            &lt;?php echo $this-&gt;form-&gt;getInput('comments'); ?&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;div class="control-group"&gt;
        &lt;div class="control-label"&gt;
            &lt;?php echo $this-&gt;form-&gt;getLabel('user_id'); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="13" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafileform/view.html.php" line="169"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messageform/view.html.php" line="180"/>
    <codefragment>        parent::display($tpl);
    }

    /**
     * Prepares the document
     *
     * @return void
     */
    protected function _prepareDocument()
    {
        $app     = JFactory::getApplication();
        $menus   = $app-&gt;getMenu();
        $pathway = $app-&gt;getPathway();
</codefragment>
  </duplication>
  <duplication lines="26" tokens="108">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafileform/view.html.php" line="208"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messageform/view.html.php" line="219"/>
    <codefragment>        if ($app-&gt;getCfg('sitename_pagetitles', 0) == 1)
        {
            $title = JText::sprintf('JPAGETITLE', $app-&gt;getCfg('sitename'), $title);
        }
        elseif ($app-&gt;getCfg('sitename_pagetitles', 0) == 2)
        {
            $title = JText::sprintf('JPAGETITLE', $title, $app-&gt;getCfg('sitename'));
        }
        $this-&gt;document-&gt;setTitle($title);

        $pathway = $app-&gt;getPathWay();
        $pathway-&gt;addItem($title, '');

        if ($this-&gt;params-&gt;get('menu-meta_description'))
        {
            $this-&gt;document-&gt;setDescription($this-&gt;params-&gt;get('menu-meta_description'));
        }

        if ($this-&gt;params-&gt;get('menu-meta_keywords'))
        {
            $this-&gt;document-&gt;setMetadata('keywords', $this-&gt;params-&gt;get('menu-meta_keywords'));
        }

        if ($this-&gt;params-&gt;get('robots'))
        {
            $this-&gt;document-&gt;setMetadata('robots', $this-&gt;params-&gt;get('robots'));
</codefragment>
  </duplication>
  <duplication lines="17" tokens="48">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/commentlist/tmpl/default.php" line="11"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messagelist/tmpl/default.php" line="11"/>
    <codefragment>defined('_JEXEC') or die;

if (BIBLESTUDY_CHECKREL)
{
    JHtml::addIncludePath(JPATH_COMPONENT . '/helpers/html');
    JHtml::_('bootstrap.tooltip');
    JHtml::_('dropdown.init');
    JHtml::_('formbehavior.chosen', 'select');
}
else
{
    JHtml::_('behavior.tooltip');
    JHtml::stylesheet('media/com_biblestudy/css/biblestudy-j2.5.css');
    JHtml::stylesheet('media/com_biblestudy/jui/css/bootstrap.css');
    JHtml::script('media/com_biblestudy/jui/js/jquery.js');
    JHtml::script('media/com_biblestudy/jui/js/jquery-noconflict.js');
    JHtml::script('media/com_biblestudy/jui/js/bootstrap.js');
</codefragment>
  </duplication>
  <duplication lines="14" tokens="34">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messages/tmpl/modal.php" line="32"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messagelist/tmpl/default.php" line="47"/>
    <codefragment>                   class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
            &lt;input type="text" name="filter_search" placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                   id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                   title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
        &lt;/div&gt;
        &lt;div class="btn-group pull-left hidden-phone"&gt;
            &lt;button class="btn tip hasTooltip" type="submit" title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                    class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
            &lt;button class="btn tip hasTooltip" type="button"
                    onclick="document.id('filter_search').value='';this.form.submit();"
                    title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="right"&gt;
            &lt;select name="filter_book" class="inputbox" onchange="this.form.submit()"&gt;
</codefragment>
  </duplication>
  <duplication lines="9" tokens="17">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/mediaimages/tmpl/default.php" line="231"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messagelist/tmpl/default.php" line="200"/>
    <codefragment>                &lt;?php endforeach; ?&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;?php echo $this-&gt;pagination-&gt;getListFooter(); ?&gt;
            &lt;?php //Load the batch processing form. ?&gt;
            &lt;?php //echo $this-&gt;loadTemplate('batch'); ?&gt;
            &lt;input type="hidden" name="task" value=""/&gt;
            &lt;input type="hidden" name="boxchecked" value="0"/&gt;
            &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
</codefragment>
  </duplication>
  <duplication lines="28" tokens="93">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messages/tmpl/modal.php" line="32"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messagelist/tmpl/modal.php" line="26"/>
    <codefragment>                   class="element-invisible"&gt;&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;&lt;/label&gt;
            &lt;input type="text" name="filter_search" placeholder="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"
                   id="filter_search" value="&lt;?php echo $this-&gt;escape($this-&gt;state-&gt;get('filter.search')); ?&gt;"
                   title="&lt;?php echo JText::_('JBS_CMN_FILTER_SEARCH_DESC'); ?&gt;"/&gt;
        &lt;/div&gt;
        &lt;div class="btn-group pull-left hidden-phone"&gt;
            &lt;button class="btn tip hasTooltip" type="submit" title="&lt;?php echo JText::_('JSEARCH_FILTER_SUBMIT'); ?&gt;"&gt;&lt;i
                    class="icon-search"&gt;&lt;/i&gt;&lt;/button&gt;
            &lt;button class="btn tip hasTooltip" type="button"
                    onclick="document.id('filter_search').value='';this.form.submit();"
                    title="&lt;?php echo JText::_('JSEARCH_FILTER_CLEAR'); ?&gt;"&gt;&lt;i class="icon-remove"&gt;&lt;/i&gt;&lt;/button&gt;
        &lt;/div&gt;
        &lt;div class="right"&gt;
            &lt;select name="filter_book" class="inputbox" onchange="this.form.submit()"&gt;
                &lt;option value=""&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_BOOK'); ?&gt;&lt;/option&gt;
                &lt;?php echo JHtml::_('select.options', $this-&gt;books, 'value', 'text', $this-&gt;state-&gt;get('filter.book')); ?&gt;
            &lt;/select&gt;
            &lt;select name="filter_teacher" class="inputbox" onchange="this.form.submit()"&gt;
                &lt;option value=""&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_TEACHER'); ?&gt;&lt;/option&gt;
                &lt;?php echo JHtml::_('select.options', $this-&gt;teachers, 'value', 'text', $this-&gt;state-&gt;get('filter.teacher')); ?&gt;
            &lt;/select&gt;
            &lt;select name="filter_series" class="inputbox" onchange="this.form.submit()"&gt;
                &lt;option value=""&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_SERIES'); ?&gt;&lt;/option&gt;
                &lt;?php echo JHtml::_('select.options', $this-&gt;series, 'value', 'text', $this-&gt;state-&gt;get('filter.series')); ?&gt;
            &lt;/select&gt;
            &lt;select name="filter_message_type" class="inputbox" onchange="this.form.submit()"&gt;
                &lt;option value=""&gt;&lt;?php echo JText::_('JBS_CMN_SELECT_MESSAGE_TYPE'); ?&gt;&lt;/option&gt;
                &lt;?php echo JHtml::_('select.options', $this-&gt;messageTypes, 'value', 'text', $this-&gt;state-&gt;get('filter.messageType')); ?&gt;
</codefragment>
  </duplication>
  <duplication lines="10" tokens="11">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/admin/views/messages/tmpl/modal.php" line="150"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messagelist/tmpl/modal.php" line="134"/>
    <codefragment>        &lt;?php endforeach; ?&gt;
    &lt;/table&gt;
    &lt;div&gt;
        &lt;input type="hidden" name="task" value=""/&gt;
        &lt;input type="hidden" name="boxchecked" value="0"/&gt;
        &lt;input type="hidden" name="filter_order" value="&lt;?php echo $listOrder; ?&gt;"/&gt;
        &lt;input type="hidden" name="filter_order_Dir" value="&lt;?php echo $listDirn; ?&gt;"/&gt;
        &lt;?php echo JHtml::_('form.token'); ?&gt;
    &lt;/div&gt;
&lt;/form&gt;
</codefragment>
  </duplication>
  <duplication lines="26" tokens="108">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/mediafileform/view.html.php" line="208"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/messagelist/view.html.php" line="160"/>
    <codefragment>        if ($app-&gt;getCfg('sitename_pagetitles', 0) == 1)
        {
            $title = JText::sprintf('JPAGETITLE', $app-&gt;getCfg('sitename'), $title);
        }
        elseif ($app-&gt;getCfg('sitename_pagetitles', 0) == 2)
        {
            $title = JText::sprintf('JPAGETITLE', $title, $app-&gt;getCfg('sitename'));
        }
        $this-&gt;document-&gt;setTitle($title);

        $pathway = $app-&gt;getPathWay();
        $pathway-&gt;addItem($title, '');

        if ($this-&gt;params-&gt;get('menu-meta_description'))
        {
            $this-&gt;document-&gt;setDescription($this-&gt;params-&gt;get('menu-meta_description'));
        }

        if ($this-&gt;params-&gt;get('menu-meta_keywords'))
        {
            $this-&gt;document-&gt;setMetadata('keywords', $this-&gt;params-&gt;get('menu-meta_keywords'));
        }

        if ($this-&gt;params-&gt;get('robots'))
        {
            $this-&gt;document-&gt;setMetadata('robots', $this-&gt;params-&gt;get('robots'));
</codefragment>
  </duplication>
  <duplication lines="17" tokens="26">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/seriesdisplays/tmpl/default_custom.php" line="86"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/sermons/tmpl/default_custom.php" line="169"/>
    <codefragment>                case '0':
                    // Do Nothing
                    break;
                case 'T':
                    // Table
                    echo '&lt;/table&gt;';
                    break;
                case 'D':
                    // DIV
                    echo '&lt;/div&gt;';
                    break;
            }
            ?&gt;
            &lt;div class="listingfooter"&gt;
                &lt;?php
                echo $this-&gt;pagination-&gt;getPagesLinks();
                echo $this-&gt;pagination-&gt;getPagesCounter();
</codefragment>
  </duplication>
  <duplication lines="7" tokens="34">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/seriesdisplay/view.html.php" line="161"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/teacher/view.html.php" line="184"/>
    <codefragment>            foreach ($studies AS $i =&gt; $study)
            {
                $pelements               = $pagebuilder-&gt;buildPage($study, $params, $this-&gt;admin_params);
                $studies[$i]-&gt;scripture1 = $pelements-&gt;scripture1;
                $studies[$i]-&gt;scripture2 = $pelements-&gt;scripture2;
                $studies[$i]-&gt;media      = $pelements-&gt;media;
                $studies[$i]-&gt;duration   = $pelements-&gt;duration;
</codefragment>
  </duplication>
  <duplication lines="17" tokens="26">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/seriesdisplays/tmpl/default_custom.php" line="86"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/teachers/tmpl/default_custom.php" line="64"/>
    <codefragment>                case '0':
                    // Do Nothing
                    break;
                case 'T':
                    // Table
                    echo '&lt;/table&gt;';
                    break;
                case 'D':
                    // DIV
                    echo '&lt;/div&gt;';
                    break;
            }
            ?&gt;
            &lt;div class="listingfooter"&gt;
                &lt;?php
                echo $this-&gt;pagination-&gt;getPagesLinks();
                echo $this-&gt;pagination-&gt;getPagesCounter();
</codefragment>
  </duplication>
  <duplication lines="44" tokens="161">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/teacher/view.html.php" line="281"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/com_biblestudy/site/views/teachers/view.html.php" line="238"/>
    <codefragment>        if (empty($title))
        {
            $title = $app-&gt;getCfg('sitename');
        }
        elseif ($app-&gt;getCfg('sitename_pagetitles', 0) == 1)
        {
            $title = JText::sprintf('JPAGETITLE', $app-&gt;getCfg('sitename'), $title);
        }
        elseif ($app-&gt;getCfg('sitename_pagetitles', 0) == 2)
        {
            $title = JText::sprintf('JPAGETITLE', $title, $app-&gt;getCfg('sitename'));
        }
        $this-&gt;document-&gt;setTitle($title);

        // Prepare meta information (under development)
        if ($itemparams-&gt;get('metakey'))
        {
            $this-&gt;document-&gt;setMetadata('keywords', $itemparams-&gt;get('metakey'));
        }
        elseif ($this-&gt;params-&gt;get('menu-meta_keywords'))
        {
            $this-&gt;document-&gt;setMetadata('keywords', $this-&gt;params-&gt;get('menu-meta_keywords'));
        }
        else
        {
            $this-&gt;document-&gt;setMetadata('keywords', $this-&gt;admin_params-&gt;get('metakey'));
        }

        if ($itemparams-&gt;get('metadesc'))
        {
            $this-&gt;document-&gt;setDescription($itemparams-&gt;get('metadesc'));
        }
        elseif ($this-&gt;params-&gt;get('menu-meta_description'))
        {
            $this-&gt;document-&gt;setDescription($this-&gt;params-&gt;get('menu-meta_description'));
        }
        else
        {
            $this-&gt;document-&gt;setDescription($this-&gt;admin_params-&gt;get('metadesc'));
        }

        if ($this-&gt;params-&gt;get('robots'))
        {
            $this-&gt;document-&gt;setMetadata('robots', $this-&gt;params-&gt;get('robots'));
</codefragment>
  </duplication>
  <duplication lines="6" tokens="42">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/mod_biblestudy/elements/detailsitemid.php" line="45"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/mod_biblestudy/elements/studieslistitemid.php" line="44"/>
    <codefragment>                . "\n ORDER BY m.name ASC"&#13;
        ;&#13;
        $db-&gt;setQuery($query);&#13;
        $options = $db-&gt;loadObjectList();&#13;
        array_unshift($options, JHTML::_('select.option', '0', '- ' . JText::_('Select a Menu Item') . ' -', 'id', 'text'));&#13;
        return JHTML::_('select.genericlist', $options, '' . $control_name . '[' . $name . ']', 'class="inputbox"', 'id', 'text', $value, $control_name . $name);&#13;
</codefragment>
  </duplication>
  <duplication lines="64" tokens="173">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/plg_biblestudy_backup/jbsbackup.php" line="130"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/plg_biblestudy_podcast/jbspodcast.php" line="139"/>
    <codefragment>        $db-&gt;setQuery($query, 0, 1);
        $result     = $db-&gt;loadObject();
        $lasttime   = $result-&gt;timeset;
        $difference = $now - $lasttime;
        $date       = getdate($now);
        $day        = $date['wday'];
        $systemhour = $date['hours'];

        if ($params-&gt;get('offset', '0') &gt; 0)
        {
            $hour = $systemhour + $offset;
        }
        else
        {
            $hour = $systemhour;
        }

        if ($params-&gt;get('day1') == $day &amp;&amp; $params-&gt;get('hour1') == $hour &amp;&amp; $difference &gt; 3600)
        {
            $checkdays = true;
        }
        if ($params-&gt;get('day2') == $day)
        {
            if ($params-&gt;get('hour2') == $hour &amp;&amp; $difference &gt; 3600)
            {
                $checkdays = true;
            }
        }
        if ($params-&gt;get('day3') == $day)
        {
            if ($params-&gt;get('hour3') == $hour &amp;&amp; $difference &gt; 3600)
            {
                $checkdays = true;
            }
        }
        if ($params-&gt;get('day4') == $day)
        {
            if ($params-&gt;get('hour4') == $hour &amp;&amp; $difference &gt; 3600)
            {
                $checkdays = true;
            }
        }
        if ($params-&gt;get('day5') == $day)
        {
            if ($params-&gt;get('hour5') == $hour &amp;&amp; $difference &gt; 3600)
            {
                $checkdays = true;
            }
        }
        if ($params-&gt;get('day6') == $day)
        {
            if ($params-&gt;get('hour6') == $hour &amp;&amp; $difference &gt; 3600)
            {
                $checkdays = true;
            }
        }
        if ($params-&gt;get('day7') == $day)
        {
            if ($params-&gt;get('hour7') == $hour &amp;&amp; $difference &gt; 3600)
            {
                $checkdays = true;
            }
        }
        if ($params-&gt;get('day8') == $day)
</codefragment>
  </duplication>
  <duplication lines="24" tokens="12">
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/plg_biblestudy_backup/script.php" line="89"/>
    <file path="/Users/Tom/Documents/JBS/Joomla-Bible-Study/plg_biblestudy_podcast/script.php" line="90"/>
    <codefragment>        echo '&lt;p&gt;' . JText::_('JBS_PLG_BACKUP_UPDATE_TEXT') . '&lt;/p&gt;';
    }

    /**
     * method to run before an install/update/uninstall method
     *
     * @param   string $type    is the type of change (install, update or discover_install)
     * @param   string $parent  is the class calling this method
     *
     * @return void
     */
    public function preflight($type, $parent)
    {
    }

    /**
     * method to run after an install/update/uninstall method
     *
     * @param   string $type    is the type of change (install, update or discover_install)
     * @param   string $parent  is the class calling this method
     *
     * @return void
     */
    public function postflight($type, $parent)
</codefragment>
  </duplication>
</pmd-cpd>
